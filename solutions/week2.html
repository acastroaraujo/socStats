<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="andrés">
<meta name="dcterms.date" content="2023-09-11">

<title>Solutions: Week 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="week2_files/libs/clipboard/clipboard.min.js"></script>
<script src="week2_files/libs/quarto-html/quarto.js"></script>
<script src="week2_files/libs/quarto-html/popper.min.js"></script>
<script src="week2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week2_files/libs/quarto-html/anchor.min.js"></script>
<link href="week2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Solutions: Week 2</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>andrés </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 11, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<details open="">
<summary>Set up</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(nycflights13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="rows" class="level2">
<h2 class="anchored" data-anchor-id="rows">Rows</h2>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section">4.2.5.1</h3>
<blockquote class="blockquote">
<p>In a single pipeline for each condition, find all flights that meet the condition:</p>
</blockquote>
<p><em>Had an arrival delay of two or more hours</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,200 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      811            630       101     1047            830
 2  2013     1     1      848           1835       853     1001           1950
 3  2013     1     1      957            733       144     1056            853
 4  2013     1     1     1114            900       134     1447           1222
 5  2013     1     1     1505           1310       115     1638           1431
 6  2013     1     1     1525           1340       105     1831           1626
 7  2013     1     1     1549           1445        64     1912           1656
 8  2013     1     1     1558           1359       119     1718           1515
 9  2013     1     1     1732           1630        62     2028           1825
10  2013     1     1     1803           1620       103     2008           1750
# ℹ 10,190 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p><em>Flew to Houston (<code>IAH</code> or <code>HOU</code>)</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"IAH"</span> <span class="sc">|</span> dest <span class="sc">==</span> <span class="st">"HOU"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,313 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      623            627        -4      933            932
 4  2013     1     1      728            732        -4     1041           1038
 5  2013     1     1      739            739         0     1104           1038
 6  2013     1     1      908            908         0     1228           1219
 7  2013     1     1     1028           1026         2     1350           1339
 8  2013     1     1     1044           1045        -1     1352           1351
 9  2013     1     1     1114            900       134     1447           1222
10  2013     1     1     1205           1200         5     1503           1505
# ℹ 9,303 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p><em>Were operated by United, American, or Delta</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="do">## hint: check the nycflights13::airlines dataset</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">filter</span>(carrier <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"UA"</span>, <span class="st">"AA"</span>, <span class="st">"DL"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 139,504 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      554            600        -6      812            837
 5  2013     1     1      554            558        -4      740            728
 6  2013     1     1      558            600        -2      753            745
 7  2013     1     1      558            600        -2      924            917
 8  2013     1     1      558            600        -2      923            937
 9  2013     1     1      559            600        -1      941            910
10  2013     1     1      559            600        -1      854            902
# ℹ 139,494 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p><em>Departed in summer (July, August, and September)</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 86,326 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     7     1        1           2029       212      236           2359
 2  2013     7     1        2           2359         3      344            344
 3  2013     7     1       29           2245       104      151              1
 4  2013     7     1       43           2130       193      322             14
 5  2013     7     1       44           2150       174      300            100
 6  2013     7     1       46           2051       235      304           2358
 7  2013     7     1       48           2001       287      308           2305
 8  2013     7     1       58           2155       183      335             43
 9  2013     7     1      100           2146       194      327             30
10  2013     7     1      100           2245       135      337            135
# ℹ 86,316 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p><em>Arrived more than two hours late, but didn’t leave late</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="do">## I will also accept dep_delay &lt;= 0</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> dep_delay <span class="sc">&lt;=</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 37 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1    27     1419           1420        -1     1754           1550
 2  2013    10     7     1350           1350         0     1736           1526
 3  2013    10     7     1357           1359        -2     1858           1654
 4  2013    10    16      657            700        -3     1258           1056
 5  2013    11     1      658            700        -2     1329           1015
 6  2013    11    11     1604           1559         5     1932           1732
 7  2013     3     8     1246           1245         1     1552           1350
 8  2013     3    18     1844           1847        -3       39           2219
 9  2013     4    17     1635           1640        -5     2049           1845
10  2013     4    18      558            600        -2     1149            850
# ℹ 27 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p><em>Were delayed by at least an hour, but made up over 30 minutes in flight</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="co"># this also works:</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="co"># filter(dep_delay &gt;= 60 &amp; dep_delay - arr_delay &gt; 30)</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">filter</span>(dep_delay <span class="sc">&gt;=</span> <span class="dv">60</span>, dep_delay <span class="sc">-</span> arr_delay <span class="sc">&gt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,844 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1     2205           1720       285       46           2040
 2  2013     1     1     2326           2130       116      131             18
 3  2013     1     3     1503           1221       162     1803           1555
 4  2013     1     3     1839           1700        99     2056           1950
 5  2013     1     3     1850           1745        65     2148           2120
 6  2013     1     3     1941           1759       102     2246           2139
 7  2013     1     3     1950           1845        65     2228           2227
 8  2013     1     3     2015           1915        60     2135           2111
 9  2013     1     3     2257           2000       177       45           2224
10  2013     1     4     1917           1700       137     2135           1950
# ℹ 1,834 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1">4.2.5.2</h3>
<blockquote class="blockquote">
<p>Sort <code>flights</code> to find the flights with longest departure delays. Find the flights that left earliest in the morning.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     9      641            900      1301     1242           1530
 2  2013     6    15     1432           1935      1137     1607           2120
 3  2013     1    10     1121           1635      1126     1239           1810
 4  2013     9    20     1139           1845      1014     1457           2210
 5  2013     7    22      845           1600      1005     1044           1815
 6  2013     4    10     1100           1900       960     1342           2211
 7  2013     3    17     2321            810       911      135           1020
 8  2013     6    27      959           1900       899     1236           2226
 9  2013     7    22     2257            759       898      121           1026
10  2013    12     5      756           1700       896     1058           2020
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">arrange</span>(hour, minute)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     7    27       NA            106        NA       NA            245
 2  2013     1     2      458            500        -2      703            650
 3  2013     1     3      458            500        -2      650            650
 4  2013     1     4      456            500        -4      631            650
 5  2013     1     5      458            500        -2      640            650
 6  2013     1     6      458            500        -2      718            650
 7  2013     1     7      454            500        -6      637            648
 8  2013     1     8      454            500        -6      625            648
 9  2013     1     9      457            500        -3      647            648
10  2013     1    10      450            500       -10      634            648
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2">4.2.5.3</h3>
<blockquote class="blockquote">
<p>Sort <code>flights</code> to find the fastest flights. (Hint: Try including a math calculation inside of your function.)</p>
</blockquote>
<p>The fastest flights will travel the longest distances in the least amount of time. Thus, I will have to calculate km/h. (Miles per hour is fine too I guess).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>to_kmh <span class="ot">&lt;-</span> <span class="cf">function</span>(distance, minutes) {</span>
<span id="cb18-2"><a href="#cb18-2"></a>  (distance <span class="sc">*</span> <span class="fl">1.60934</span>) <span class="sc">/</span> (minutes <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb18-3"><a href="#cb18-3"></a>}</span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb18-6"><a href="#cb18-6"></a>  <span class="fu">mutate</span>(<span class="at">speed =</span> <span class="fu">to_kmh</span>(distance, air_time)) <span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>  <span class="fu">relocate</span>(speed) <span class="sc">|&gt;</span> </span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(speed))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 20
   speed  year month   day dep_time sched_dep_time dep_delay arr_time
   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
 1 1132.  2013     5    25     1709           1700         9     1923
 2 1047.  2013     7     2     1558           1513        45     1745
 3 1043.  2013     5    13     2040           2025        15     2225
 4 1032.  2013     3    23     1914           1910         4     2045
 5  952.  2013     1    12     1559           1600        -1     1849
 6  908.  2013    11    17      650            655        -5     1059
 7  897.  2013     2    21     2355           2358        -3      412
 8  896.  2013    11    17      759            800        -1     1212
 9  892.  2013    11    16     2003           1925        38       17
10  892.  2013    11    16     2349           2359       -10      402
# ℹ 336,766 more rows
# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,
#   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,
#   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3">4.2.5.4</h3>
<blockquote class="blockquote">
<p>Was there a flight on every day of 2013?</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">distinct</span>(month, day) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">summarize</span>(<span class="at">num_days =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  num_days
     &lt;int&gt;
1      365</code></pre>
</div>
</div>
<p>Yes!</p>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4">4.2.5.5</h3>
<blockquote class="blockquote">
<p>Which flights traveled the farthest distance? Which traveled the least distance?</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(distance))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      857            900        -3     1516           1530
 2  2013     1     2      909            900         9     1525           1530
 3  2013     1     3      914            900        14     1504           1530
 4  2013     1     4      900            900         0     1516           1530
 5  2013     1     5      858            900        -2     1519           1530
 6  2013     1     6     1019            900        79     1558           1530
 7  2013     1     7     1042            900       102     1620           1530
 8  2013     1     8      901            900         1     1504           1530
 9  2013     1     9      641            900      1301     1242           1530
10  2013     1    10      859            900        -1     1449           1530
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">arrange</span>(distance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     7    27       NA            106        NA       NA            245
 2  2013     1     3     2127           2129        -2     2222           2224
 3  2013     1     4     1240           1200        40     1333           1306
 4  2013     1     4     1829           1615       134     1937           1721
 5  2013     1     4     2128           2129        -1     2218           2224
 6  2013     1     5     1155           1200        -5     1241           1306
 7  2013     1     6     2125           2129        -4     2224           2224
 8  2013     1     7     2124           2129        -5     2212           2224
 9  2013     1     8     2127           2130        -3     2304           2225
10  2013     1     9     2126           2129        -3     2217           2224
# ℹ 336,766 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-5" class="level3">
<h3 class="anchored" data-anchor-id="section-5">4.2.5.6</h3>
<blockquote class="blockquote">
<p>Does it matter what order you used <a href="https://dplyr.tidyverse.org/reference/filter.html"><code>filter()</code></a> and <a href="https://dplyr.tidyverse.org/reference/arrange.html"><code>arrange()</code></a> if you’re using both? Why/why not? Think about the results and how much work the functions would have to do.</p>
</blockquote>
<p>No, it doesn’t matter. Filter does logical subsetting, and it doesn’t matter if we re-arrange the data before or after subsetting.</p>
</section>
</section>
<section id="columns" class="level2">
<h2 class="anchored" data-anchor-id="columns">Columns</h2>
<section id="section-6" class="level3">
<h3 class="anchored" data-anchor-id="section-6">4.3.5.1</h3>
<blockquote class="blockquote">
<p>Compare <code>dep_time</code>, <code>sched_dep_time</code>, and <code>dep_delay</code>. How would you expect those three numbers to be related?</p>
</blockquote>
<p><code>sched_dep_time</code> = <code>dep_time</code> - <code>dep_delay</code></p>
</section>
<section id="section-7" class="level3">
<h3 class="anchored" data-anchor-id="section-7">4.3.5.2</h3>
<blockquote class="blockquote">
<p>Brainstorm as many ways as possible to select <code>dep_time</code>, <code>dep_delay</code>, <code>arr_time</code>, and <code>arr_delay</code> from <code>flights</code>.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">select</span>(dep_time, dep_delay, arr_time, arr_delay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 4
   dep_time dep_delay arr_time arr_delay
      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1      517         2      830        11
 2      533         4      850        20
 3      542         2      923        33
 4      544        -1     1004       -18
 5      554        -6      812       -25
 6      554        -4      740        12
 7      555        -5      913        19
 8      557        -3      709       -14
 9      557        -3      838        -8
10      558        -2      753         8
# ℹ 336,766 more rows</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"dep_"</span>), <span class="fu">starts_with</span>(<span class="st">"arr_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 4
   dep_time dep_delay arr_time arr_delay
      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1      517         2      830        11
 2      533         4      850        20
 3      542         2      923        33
 4      544        -1     1004       -18
 5      554        -6      812       -25
 6      554        -4      740        12
 7      555        -5      913        19
 8      557        -3      709       -14
 9      557        -3      838        -8
10      558        -2      753         8
# ℹ 336,766 more rows</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">select</span>(dep_time<span class="sc">:</span>arr_delay) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="do">## or ! instead of -</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 4
   dep_time dep_delay arr_time arr_delay
      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1      517         2      830        11
 2      533         4      850        20
 3      542         2      923        33
 4      544        -1     1004       -18
 5      554        -6      812       -25
 6      554        -4      740        12
 7      555        -5      913        19
 8      557        -3      709       -14
 9      557        -3      838        -8
10      558        -2      753         8
# ℹ 336,766 more rows</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"(^arr|^dep)_(time$|delay$)"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 4
   dep_time dep_delay arr_time arr_delay
      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1      517         2      830        11
 2      533         4      850        20
 3      542         2      923        33
 4      544        -1     1004       -18
 5      554        -6      812       -25
 6      554        -4      740        12
 7      555        -5      913        19
 8      557        -3      709       -14
 9      557        -3      838        -8
10      558        -2      753         8
# ℹ 336,766 more rows</code></pre>
</div>
</div>
</section>
<section id="section-8" class="level3">
<h3 class="anchored" data-anchor-id="section-8">4.3.5.3</h3>
<blockquote class="blockquote">
<p>What happens if you specify the name of the same variable multiple times in a <a href="https://dplyr.tidyverse.org/reference/select.html"><code>select()</code></a> call?</p>
</blockquote>
<p>You only get the variable once!</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">select</span>(day, day, day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 1
     day
   &lt;int&gt;
 1     1
 2     1
 3     1
 4     1
 5     1
 6     1
 7     1
 8     1
 9     1
10     1
# ℹ 336,766 more rows</code></pre>
</div>
</div>
<p>Note that this is different from “base” subsetting with character vectors.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>flights[, <span class="fu">c</span>(<span class="st">"day"</span>, <span class="st">"day"</span>, <span class="st">"day"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 3
     day   day   day
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1     1     1     1
 2     1     1     1
 3     1     1     1
 4     1     1     1
 5     1     1     1
 6     1     1     1
 7     1     1     1
 8     1     1     1
 9     1     1     1
10     1     1     1
# ℹ 336,766 more rows</code></pre>
</div>
</div>
</section>
<section id="section-9" class="level3">
<h3 class="anchored" data-anchor-id="section-9">4.3.5.4</h3>
<blockquote class="blockquote">
<p>What does the <a href="https://tidyselect.r-lib.org/reference/all_of.html"><code>any_of()</code></a> function do? Why might it be helpful in conjunction with this vector?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"dep_delay"</span>, <span class="st">"arr_delay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p>It allows you to specify the name of variables for subsetting outside the dplyr pipeline.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"dep_delay"</span>, <span class="st">"arr_delay"</span>)</span>
<span id="cb39-2"><a href="#cb39-2"></a></span>
<span id="cb39-3"><a href="#cb39-3"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(variables))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 5
    year month   day dep_delay arr_delay
   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1  2013     1     1         2        11
 2  2013     1     1         4        20
 3  2013     1     1         2        33
 4  2013     1     1        -1       -18
 5  2013     1     1        -6       -25
 6  2013     1     1        -4        12
 7  2013     1     1        -5        19
 8  2013     1     1        -3       -14
 9  2013     1     1        -3        -8
10  2013     1     1        -2         8
# ℹ 336,766 more rows</code></pre>
</div>
</div>
</section>
<section id="section-10" class="level3">
<h3 class="anchored" data-anchor-id="section-10">4.3.5.5</h3>
<blockquote class="blockquote">
<p>Does the result of running the following code surprise you? How do the select helpers deal with upper and lower case by default? How can you change that default?</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"TIME"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 6
   dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          
      &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt; &lt;dttm&gt;             
 1      517            515      830            819      227 2013-01-01 05:00:00
 2      533            529      850            830      227 2013-01-01 05:00:00
 3      542            540      923            850      160 2013-01-01 05:00:00
 4      544            545     1004           1022      183 2013-01-01 05:00:00
 5      554            600      812            837      116 2013-01-01 06:00:00
 6      554            558      740            728      150 2013-01-01 05:00:00
 7      555            600      913            854      158 2013-01-01 06:00:00
 8      557            600      709            723       53 2013-01-01 06:00:00
 9      557            600      838            846      140 2013-01-01 06:00:00
10      558            600      753            745      138 2013-01-01 06:00:00
# ℹ 336,766 more rows</code></pre>
</div>
</div>
<p>Yes, it’s surprising to me. The selection helpers have the argument <code>ignore.case = TRUE</code> as a default.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"TIME"</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 0</code></pre>
</div>
</div>
</section>
<section id="section-11" class="level3">
<h3 class="anchored" data-anchor-id="section-11">4.3.5.6</h3>
<blockquote class="blockquote">
<p>Rename <code>air_time</code> to <code>air_time_min</code> to indicate units of measurement and move it to the beginning of the data frame.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2"></a>  <span class="fu">rename</span>(<span class="at">air_time_min =</span> air_time) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3"></a>  <span class="fu">relocate</span>(air_time_min)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
   air_time_min  year month   day dep_time sched_dep_time dep_delay arr_time
          &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
 1          227  2013     1     1      517            515         2      830
 2          227  2013     1     1      533            529         4      850
 3          160  2013     1     1      542            540         2      923
 4          183  2013     1     1      544            545        -1     1004
 5          116  2013     1     1      554            600        -6      812
 6          150  2013     1     1      554            558        -4      740
 7          158  2013     1     1      555            600        -5      913
 8           53  2013     1     1      557            600        -3      709
 9          140  2013     1     1      557            600        -3      838
10          138  2013     1     1      558            600        -2      753
# ℹ 336,766 more rows
# ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,
#   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-12" class="level3">
<h3 class="anchored" data-anchor-id="section-12">4.3.5.7</h3>
<blockquote class="blockquote">
<p>Why doesn’t the following work, and what does the error mean?</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href="#cb47-2"></a>  <span class="fu">select</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3"></a>  <span class="fu">arrange</span>(arr_delay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in `arrange()`:
ℹ In argument: `..1 = arr_delay`.
Caused by error:
! object 'arr_delay' not found</code></pre>
</div>
</div>
<p>Line #2 drops every variable in the data frame except <code>tailnum</code>. Thus, there’s no <code>arr_delay</code> object for <code>arrange()</code> to work with.</p>
</section>
</section>
<section id="groups" class="level2">
<h2 class="anchored" data-anchor-id="groups">Groups</h2>
<section id="section-13" class="level3">
<h3 class="anchored" data-anchor-id="section-13">4.5.7.1</h3>
<blockquote class="blockquote">
<p>Which carrier has the worst average delays? Challenge: can you disentangle the effects of bad airports vs.&nbsp;bad carriers? Why/why not? (Hint: think about flights |&gt; group_by(carrier, dest) |&gt; summarize(n()))</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="#cb49-3"></a>  <span class="fu">summarize</span>(<span class="at">avg_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb49-4"><a href="#cb49-4"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 2
   carrier avg_dep_delay
   &lt;chr&gt;           &lt;dbl&gt;
 1 F9              20.2 
 2 EV              20.0 
 3 YV              19.0 
 4 FL              18.7 
 5 WN              17.7 
 6 9E              16.7 
 7 B6              13.0 
 8 VX              12.9 
 9 OO              12.6 
10 UA              12.1 
11 MQ              10.6 
12 DL               9.26
13 AA               8.59
14 AS               5.80
15 HA               4.90
16 US               3.78</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2"></a>  <span class="fu">filter</span>(carrier <span class="sc">==</span> <span class="st">"F9"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="fu">count</span>(carrier, dest, origin) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  carrier dest  origin     n
  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;
1 F9      DEN   LGA      685</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="fu">count</span>(carrier, dest) <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"DEN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  carrier dest      n
  &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;
1 B6      DEN     338
2 DL      DEN    1043
3 F9      DEN     685
4 UA      DEN    3796
5 WN      DEN    1404</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb55-2"><a href="#cb55-2"></a>  <span class="fu">group_by</span>(carrier, dest, origin) <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">avg_dd =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a href="#cb55-4"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"DEN"</span> <span class="sc">|</span> carrier <span class="sc">==</span> <span class="st">"F9"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb55-5"><a href="#cb55-5"></a>  <span class="fu">arrange</span>(avg_dd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'carrier', 'dest'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 5
# Groups:   carrier, dest [5]
  carrier dest  origin     n avg_dd
  &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;  &lt;dbl&gt;
1 DL      DEN   LGA      678   9.82
2 UA      DEN   LGA     1626  10.6 
3 UA      DEN   EWR     2170  14.1 
4 WN      DEN   LGA      715  15.4 
5 DL      DEN   JFK      365  16.6 
6 F9      DEN   LGA      685  20.2 
7 B6      DEN   JFK      338  23.9 
8 WN      DEN   EWR      689  24.4 </code></pre>
</div>
</div>
<p>Frontier Airlines (F9) is headquartered in Denver and this dataset only records flights from LGA to DEN. This means there’s no variance in F9 accross airports. We might be able to disentangle the effect of airport and carrier, but we will have to make assumptions.</p>
</section>
<section id="section-14" class="level3">
<h3 class="anchored" data-anchor-id="section-14">4.5.7.2</h3>
<blockquote class="blockquote">
<p>Find the flights that are most delayed upon departure from each destination.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">group_by</span>(dest) <span class="sc">|&gt;</span> </span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">slice_max</span>(dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">relocate</span>(dest, carrier, dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb58-5"><a href="#cb58-5"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 105 × 19
# Groups:   dest [105]
   dest  carrier dep_delay  year month   day dep_time sched_dep_time arr_time
   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;int&gt;
 1 HNL   HA           1301  2013     1     9      641            900     1242
 2 CMH   MQ           1137  2013     6    15     1432           1935     1607
 3 ORD   MQ           1126  2013     1    10     1121           1635     1239
 4 SFO   AA           1014  2013     9    20     1139           1845     1457
 5 CVG   MQ           1005  2013     7    22      845           1600     1044
 6 TPA   DL            960  2013     4    10     1100           1900     1342
 7 MSP   DL            911  2013     3    17     2321            810      135
 8 PDX   DL            899  2013     6    27      959           1900     1236
 9 ATL   DL            898  2013     7    22     2257            759      121
10 MIA   AA            896  2013    12     5      756           1700     1058
# ℹ 95 more rows
# ℹ 10 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="section-15" class="level3">
<h3 class="anchored" data-anchor-id="section-15">4.5.7.3</h3>
<blockquote class="blockquote">
<p>How do delays vary over the course of the day. Illustrate your answer with a plot.</p>
</blockquote>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="fu">group_by</span>(hour) <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay)) <span class="sc">|&gt;</span> </span>
<span id="cb60-4"><a href="#cb60-4"></a>  <span class="fu">summarize</span>(</span>
<span id="cb60-5"><a href="#cb60-5"></a>    <span class="at">avg =</span> <span class="fu">mean</span>(dep_delay),</span>
<span id="cb60-6"><a href="#cb60-6"></a>    <span class="at">se =</span> <span class="fu">sd</span>(dep_delay) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>())</span>
<span id="cb60-7"><a href="#cb60-7"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb60-8"><a href="#cb60-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hour, avg)) <span class="sc">+</span> </span>
<span id="cb60-9"><a href="#cb60-9"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> avg <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span>se, <span class="at">ymax =</span> avg <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>se), <span class="at">size =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb60-10"><a href="#cb60-10"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="week2_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="section-16" class="level3">
<h3 class="anchored" data-anchor-id="section-16">4.5.7.4</h3>
<blockquote class="blockquote">
<p>What happens if you supply a negative <code>n</code> to <a href="https://dplyr.tidyverse.org/reference/slice.html"><code>slice_min()</code></a> and friends?</p>
</blockquote>
<p>The documentation for this behavior is not great and I can’t think of a single example in which I’d use those functions that way instead of using <code>arrange()</code>.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>A <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2"></a>  <span class="fu">slice_min</span>(dep_delay, <span class="at">n =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb61-3"><a href="#cb61-3"></a></span>
<span id="cb61-4"><a href="#cb61-4"></a>B <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb61-5"><a href="#cb61-5"></a>  <span class="fu">arrange</span>(dep_delay)</span>
<span id="cb61-6"><a href="#cb61-6"></a></span>
<span id="cb61-7"><a href="#cb61-7"></a><span class="fu">identical</span>(A, B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>C <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a href="#cb63-2"></a>  <span class="fu">slice_max</span>(dep_delay, <span class="at">n =</span> <span class="sc">-</span><span class="dv">1</span>) </span>
<span id="cb63-3"><a href="#cb63-3"></a></span>
<span id="cb63-4"><a href="#cb63-4"></a>D <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb63-5"><a href="#cb63-5"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span>
<span id="cb63-6"><a href="#cb63-6"></a></span>
<span id="cb63-7"><a href="#cb63-7"></a><span class="fu">identical</span>(C, D)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="section-17" class="level3">
<h3 class="anchored" data-anchor-id="section-17">4.5.7.5</h3>
<blockquote class="blockquote">
<p>Explain what <a href="https://dplyr.tidyverse.org/reference/count.html"><code>count()</code></a> does in terms of the dplyr verbs you just learned. What does the <code>sort</code> argument to <a href="https://dplyr.tidyverse.org/reference/count.html"><code>count()</code></a> do?</p>
</blockquote>
<p>Count is a short-hand for <code>group_by</code> + <code>summarize</code>. The <code>sort</code> argument accomplishes the same as <code>arrange</code>.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2"></a>  <span class="fu">group_by</span>(origin) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a href="#cb65-3"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb65-4"><a href="#cb65-4"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  origin      n
  &lt;chr&gt;   &lt;int&gt;
1 EWR    120835
2 JFK    111279
3 LGA    104662</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2"></a>  <span class="fu">count</span>(origin, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  origin      n
  &lt;chr&gt;   &lt;int&gt;
1 EWR    120835
2 JFK    111279
3 LGA    104662</code></pre>
</div>
</div>
</section>
<section id="section-18" class="level3">
<h3 class="anchored" data-anchor-id="section-18">4.5.7.6</h3>
<blockquote class="blockquote">
<p>Suppose we have the following tiny data frame:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb69-2"><a href="#cb69-2"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb69-3"><a href="#cb69-3"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>),</span>
<span id="cb69-4"><a href="#cb69-4"></a>  <span class="at">z =</span> <span class="fu">c</span>(<span class="st">"K"</span>, <span class="st">"K"</span>, <span class="st">"L"</span>, <span class="st">"L"</span>, <span class="st">"K"</span>)</span>
<span id="cb69-5"><a href="#cb69-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Write down what you think the output will look like, then check if you were correct, and describe what <a href="https://dplyr.tidyverse.org/reference/group_by.html"><code>group_by()</code></a> does.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>  <span class="fu">group_by</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p><em>two groups?</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>df <span class="sc">|&gt;</span> <span class="fu">group_by</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   y [2]
      x y     z    
  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1     1 a     K    
2     2 b     K    
3     3 a     L    
4     4 a     L    
5     5 b     K    </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Write down what you think the output will look like, then check if you were correct, and describe what <code>arrange()</code> does. Also comment on how it’s different from the <code>group_by()</code> in part (a)?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2"></a>  <span class="fu">arrange</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p><em>I assume that y will be a, a, a, b, b and that x will be 1, 3, 4, 2, 5</em></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="fu">arrange</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
      x y     z    
  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1     1 a     K    
2     3 a     L    
3     4 a     L    
4     2 b     K    
5     5 b     K    </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>  <span class="fu">group_by</span>(y) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p>I assume the new data frame will have two columns (<code>x</code>, <code>y</code>) and two rows (<code>y = 2.67</code>, <code>y = 3.5</code>)</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>  <span class="fu">group_by</span>(y) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  y     mean_x
  &lt;chr&gt;  &lt;dbl&gt;
1 a       2.67
2 b       3.5 </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does. Then, comment on what the message says.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p>I assume there will be 3 columns (<code>x</code>, <code>y</code>, <code>z</code>) and three rows (<code>x = c(1, 3.5, 3.5)</code>).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'y'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   y [2]
  y     z     mean_x
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
1 a     K        1  
2 a     L        3.5
3 b     K        3.5</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does. How is the output different from the one in part (d).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  y     z     mean_x
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
1 a     K        1  
2 a     L        3.5
3 b     K        3.5</code></pre>
</div>
</div>
</blockquote>
<p>I assume the same answer, except the output won’t be “grouped.”</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  y     z     mean_x
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
1 a     K        1  
2 a     L        3.5
3 b     K        3.5</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Write down what you think the outputs will look like, then check if you were correct, and describe what each pipeline does. How are the outputs of the two pipelines different?</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span>
<span id="cb87-4"><a href="#cb87-4"></a></span>
<span id="cb87-5"><a href="#cb87-5"></a>df <span class="sc">|&gt;</span></span>
<span id="cb87-6"><a href="#cb87-6"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb87-7"><a href="#cb87-7"></a>  <span class="fu">mutate</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</blockquote>
<p>The results will be similar, except that the first pipeline will have 3 rows and the second one will have 5 rows.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'y'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
# Groups:   y [2]
  y     z     mean_x
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
1 a     K        1  
2 a     L        3.5
3 b     K        3.5</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3"></a>  <span class="fu">mutate</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
# Groups:   y, z [3]
      x y     z     mean_x
  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
1     1 a     K        1  
2     2 b     K        3.5
3     3 a     L        3.5
4     4 a     L        3.5
5     5 b     K        3.5</code></pre>
</div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb93" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb93-1"><a href="#cb93-1"></a><span class="co">---</span></span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="an">title:</span><span class="co"> "Solutions: Week 2"</span></span>
<span id="cb93-3"><a href="#cb93-3"></a><span class="an">author:</span><span class="co"> "andrés"</span></span>
<span id="cb93-4"><a href="#cb93-4"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb93-5"><a href="#cb93-5"></a><span class="an">format:</span></span>
<span id="cb93-6"><a href="#cb93-6"></a><span class="co">  html:</span></span>
<span id="cb93-7"><a href="#cb93-7"></a><span class="co">    theme: cosmo</span></span>
<span id="cb93-8"><a href="#cb93-8"></a><span class="co">    monofont: Fira Code</span></span>
<span id="cb93-9"><a href="#cb93-9"></a><span class="co">    fontsize: 1em</span></span>
<span id="cb93-10"><a href="#cb93-10"></a><span class="co">    code-fold: show</span></span>
<span id="cb93-11"><a href="#cb93-11"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb93-12"><a href="#cb93-12"></a><span class="co">    code-tools: true</span></span>
<span id="cb93-13"><a href="#cb93-13"></a><span class="co">    fig-align: "center"</span></span>
<span id="cb93-14"><a href="#cb93-14"></a><span class="co">    mainfont: Optima</span></span>
<span id="cb93-15"><a href="#cb93-15"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb93-16"><a href="#cb93-16"></a><span class="co">---</span></span>
<span id="cb93-17"><a href="#cb93-17"></a></span>
<span id="cb93-20"><a href="#cb93-20"></a><span class="in">```{r}</span></span>
<span id="cb93-21"><a href="#cb93-21"></a><span class="co">#| code-summary: "Set up"</span></span>
<span id="cb93-22"><a href="#cb93-22"></a><span class="co">#| message: false</span></span>
<span id="cb93-23"><a href="#cb93-23"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb93-24"><a href="#cb93-24"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb93-25"><a href="#cb93-25"></a><span class="in">```</span></span>
<span id="cb93-26"><a href="#cb93-26"></a></span>
<span id="cb93-27"><a href="#cb93-27"></a><span class="fu">## Rows</span></span>
<span id="cb93-28"><a href="#cb93-28"></a></span>
<span id="cb93-29"><a href="#cb93-29"></a><span class="fu">### 4.2.5.1</span></span>
<span id="cb93-30"><a href="#cb93-30"></a></span>
<span id="cb93-31"><a href="#cb93-31"></a><span class="at">&gt; In a single pipeline for each condition, find all flights that meet the condition:</span></span>
<span id="cb93-32"><a href="#cb93-32"></a></span>
<span id="cb93-33"><a href="#cb93-33"></a>*Had an arrival delay of two or more hours*</span>
<span id="cb93-34"><a href="#cb93-34"></a></span>
<span id="cb93-37"><a href="#cb93-37"></a><span class="in">```{r}</span></span>
<span id="cb93-38"><a href="#cb93-38"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-39"><a href="#cb93-39"></a>  <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)</span>
<span id="cb93-40"><a href="#cb93-40"></a><span class="in">```</span></span>
<span id="cb93-41"><a href="#cb93-41"></a></span>
<span id="cb93-42"><a href="#cb93-42"></a>*Flew to Houston (`IAH` or `HOU`)*</span>
<span id="cb93-43"><a href="#cb93-43"></a></span>
<span id="cb93-46"><a href="#cb93-46"></a><span class="in">```{r}</span></span>
<span id="cb93-47"><a href="#cb93-47"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-48"><a href="#cb93-48"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"IAH"</span> <span class="sc">|</span> dest <span class="sc">==</span> <span class="st">"HOU"</span>)</span>
<span id="cb93-49"><a href="#cb93-49"></a><span class="in">```</span></span>
<span id="cb93-50"><a href="#cb93-50"></a></span>
<span id="cb93-51"><a href="#cb93-51"></a>*Were operated by United, American, or Delta*</span>
<span id="cb93-52"><a href="#cb93-52"></a></span>
<span id="cb93-55"><a href="#cb93-55"></a><span class="in">```{r}</span></span>
<span id="cb93-56"><a href="#cb93-56"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-57"><a href="#cb93-57"></a>  <span class="do">## hint: check the nycflights13::airlines dataset</span></span>
<span id="cb93-58"><a href="#cb93-58"></a>  <span class="fu">filter</span>(carrier <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"UA"</span>, <span class="st">"AA"</span>, <span class="st">"DL"</span>))</span>
<span id="cb93-59"><a href="#cb93-59"></a><span class="in">```</span></span>
<span id="cb93-60"><a href="#cb93-60"></a></span>
<span id="cb93-61"><a href="#cb93-61"></a>*Departed in summer (July, August, and September)*</span>
<span id="cb93-62"><a href="#cb93-62"></a></span>
<span id="cb93-65"><a href="#cb93-65"></a><span class="in">```{r}</span></span>
<span id="cb93-66"><a href="#cb93-66"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-67"><a href="#cb93-67"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb93-68"><a href="#cb93-68"></a><span class="in">```</span></span>
<span id="cb93-69"><a href="#cb93-69"></a></span>
<span id="cb93-70"><a href="#cb93-70"></a>*Arrived more than two hours late, but didn't leave late*</span>
<span id="cb93-71"><a href="#cb93-71"></a></span>
<span id="cb93-74"><a href="#cb93-74"></a><span class="in">```{r}</span></span>
<span id="cb93-75"><a href="#cb93-75"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-76"><a href="#cb93-76"></a>  <span class="do">## I will also accept dep_delay &lt;= 0</span></span>
<span id="cb93-77"><a href="#cb93-77"></a>  <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> dep_delay <span class="sc">&lt;=</span> <span class="dv">5</span>)</span>
<span id="cb93-78"><a href="#cb93-78"></a><span class="in">```</span></span>
<span id="cb93-79"><a href="#cb93-79"></a></span>
<span id="cb93-80"><a href="#cb93-80"></a>*Were delayed by at least an hour, but made up over 30 minutes in flight*</span>
<span id="cb93-81"><a href="#cb93-81"></a></span>
<span id="cb93-84"><a href="#cb93-84"></a><span class="in">```{r}</span></span>
<span id="cb93-85"><a href="#cb93-85"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-86"><a href="#cb93-86"></a>  <span class="co"># this also works:</span></span>
<span id="cb93-87"><a href="#cb93-87"></a>  <span class="co"># filter(dep_delay &gt;= 60 &amp; dep_delay - arr_delay &gt; 30)</span></span>
<span id="cb93-88"><a href="#cb93-88"></a>  <span class="fu">filter</span>(dep_delay <span class="sc">&gt;=</span> <span class="dv">60</span>, dep_delay <span class="sc">-</span> arr_delay <span class="sc">&gt;</span> <span class="dv">30</span>)</span>
<span id="cb93-89"><a href="#cb93-89"></a><span class="in">```</span></span>
<span id="cb93-90"><a href="#cb93-90"></a></span>
<span id="cb93-91"><a href="#cb93-91"></a><span class="fu">### 4.2.5.2</span></span>
<span id="cb93-92"><a href="#cb93-92"></a></span>
<span id="cb93-93"><a href="#cb93-93"></a><span class="at">&gt; Sort </span><span class="in">`flights`</span><span class="at"> to find the flights with longest departure delays. Find the flights that left earliest in the morning.</span></span>
<span id="cb93-94"><a href="#cb93-94"></a></span>
<span id="cb93-97"><a href="#cb93-97"></a><span class="in">```{r}</span></span>
<span id="cb93-98"><a href="#cb93-98"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-99"><a href="#cb93-99"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span>
<span id="cb93-100"><a href="#cb93-100"></a></span>
<span id="cb93-101"><a href="#cb93-101"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-102"><a href="#cb93-102"></a>  <span class="fu">arrange</span>(hour, minute)</span>
<span id="cb93-103"><a href="#cb93-103"></a><span class="in">```</span></span>
<span id="cb93-104"><a href="#cb93-104"></a></span>
<span id="cb93-105"><a href="#cb93-105"></a><span class="fu">### 4.2.5.3</span></span>
<span id="cb93-106"><a href="#cb93-106"></a></span>
<span id="cb93-107"><a href="#cb93-107"></a><span class="at">&gt; Sort </span><span class="in">`flights`</span><span class="at"> to find the fastest flights. (Hint: Try including a math calculation inside of your function.)</span></span>
<span id="cb93-108"><a href="#cb93-108"></a></span>
<span id="cb93-109"><a href="#cb93-109"></a>The fastest flights will travel the longest distances in the least amount of time. Thus, I will have to calculate km/h. (Miles per hour is fine too I guess).</span>
<span id="cb93-110"><a href="#cb93-110"></a></span>
<span id="cb93-113"><a href="#cb93-113"></a><span class="in">```{r}</span></span>
<span id="cb93-114"><a href="#cb93-114"></a>to_kmh <span class="ot">&lt;-</span> <span class="cf">function</span>(distance, minutes) {</span>
<span id="cb93-115"><a href="#cb93-115"></a>  (distance <span class="sc">*</span> <span class="fl">1.60934</span>) <span class="sc">/</span> (minutes <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb93-116"><a href="#cb93-116"></a>}</span>
<span id="cb93-117"><a href="#cb93-117"></a></span>
<span id="cb93-118"><a href="#cb93-118"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-119"><a href="#cb93-119"></a>  <span class="fu">mutate</span>(<span class="at">speed =</span> <span class="fu">to_kmh</span>(distance, air_time)) <span class="sc">|&gt;</span></span>
<span id="cb93-120"><a href="#cb93-120"></a>  <span class="fu">relocate</span>(speed) <span class="sc">|&gt;</span> </span>
<span id="cb93-121"><a href="#cb93-121"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(speed))</span>
<span id="cb93-122"><a href="#cb93-122"></a><span class="in">```</span></span>
<span id="cb93-123"><a href="#cb93-123"></a></span>
<span id="cb93-124"><a href="#cb93-124"></a><span class="fu">### 4.2.5.4</span></span>
<span id="cb93-125"><a href="#cb93-125"></a></span>
<span id="cb93-126"><a href="#cb93-126"></a><span class="at">&gt; Was there a flight on every day of 2013?</span></span>
<span id="cb93-127"><a href="#cb93-127"></a></span>
<span id="cb93-130"><a href="#cb93-130"></a><span class="in">```{r}</span></span>
<span id="cb93-131"><a href="#cb93-131"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-132"><a href="#cb93-132"></a>  <span class="fu">distinct</span>(month, day) <span class="sc">|&gt;</span> </span>
<span id="cb93-133"><a href="#cb93-133"></a>  <span class="fu">summarize</span>(<span class="at">num_days =</span> <span class="fu">n</span>())</span>
<span id="cb93-134"><a href="#cb93-134"></a><span class="in">```</span></span>
<span id="cb93-135"><a href="#cb93-135"></a></span>
<span id="cb93-136"><a href="#cb93-136"></a>Yes!</span>
<span id="cb93-137"><a href="#cb93-137"></a></span>
<span id="cb93-138"><a href="#cb93-138"></a><span class="fu">### 4.2.5.5</span></span>
<span id="cb93-139"><a href="#cb93-139"></a></span>
<span id="cb93-140"><a href="#cb93-140"></a><span class="at">&gt; Which flights traveled the farthest distance? Which traveled the least distance?</span></span>
<span id="cb93-141"><a href="#cb93-141"></a></span>
<span id="cb93-144"><a href="#cb93-144"></a><span class="in">```{r}</span></span>
<span id="cb93-145"><a href="#cb93-145"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-146"><a href="#cb93-146"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(distance))</span>
<span id="cb93-147"><a href="#cb93-147"></a></span>
<span id="cb93-148"><a href="#cb93-148"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-149"><a href="#cb93-149"></a>  <span class="fu">arrange</span>(distance)</span>
<span id="cb93-150"><a href="#cb93-150"></a><span class="in">```</span></span>
<span id="cb93-151"><a href="#cb93-151"></a></span>
<span id="cb93-152"><a href="#cb93-152"></a><span class="fu">### 4.2.5.6</span></span>
<span id="cb93-153"><a href="#cb93-153"></a></span>
<span id="cb93-154"><a href="#cb93-154"></a><span class="at">&gt; Does it matter what order you used </span><span class="co">[</span><span class="ot">`filter()`</span><span class="co">](https://dplyr.tidyverse.org/reference/filter.html)</span><span class="at"> and </span><span class="co">[</span><span class="ot">`arrange()`</span><span class="co">](https://dplyr.tidyverse.org/reference/arrange.html)</span><span class="at"> if you're using both? Why/why not? Think about the results and how much work the functions would have to do.</span></span>
<span id="cb93-155"><a href="#cb93-155"></a></span>
<span id="cb93-156"><a href="#cb93-156"></a>No, it doesn't matter. Filter does logical subsetting, and it doesn't matter if we re-arrange the data before or after subsetting.</span>
<span id="cb93-157"><a href="#cb93-157"></a></span>
<span id="cb93-158"><a href="#cb93-158"></a><span class="fu">## Columns</span></span>
<span id="cb93-159"><a href="#cb93-159"></a></span>
<span id="cb93-160"><a href="#cb93-160"></a><span class="fu">### 4.3.5.1</span></span>
<span id="cb93-161"><a href="#cb93-161"></a></span>
<span id="cb93-162"><a href="#cb93-162"></a><span class="at">&gt; Compare </span><span class="in">`dep_time`</span><span class="at">, </span><span class="in">`sched_dep_time`</span><span class="at">, and </span><span class="in">`dep_delay`</span><span class="at">. How would you expect those three numbers to be related?</span></span>
<span id="cb93-163"><a href="#cb93-163"></a></span>
<span id="cb93-164"><a href="#cb93-164"></a><span class="in">`sched_dep_time`</span> = <span class="in">`dep_time`</span> - <span class="in">`dep_delay`</span></span>
<span id="cb93-165"><a href="#cb93-165"></a></span>
<span id="cb93-166"><a href="#cb93-166"></a><span class="fu">### 4.3.5.2</span></span>
<span id="cb93-167"><a href="#cb93-167"></a></span>
<span id="cb93-168"><a href="#cb93-168"></a><span class="at">&gt; Brainstorm as many ways as possible to select </span><span class="in">`dep_time`</span><span class="at">, </span><span class="in">`dep_delay`</span><span class="at">, </span><span class="in">`arr_time`</span><span class="at">, and </span><span class="in">`arr_delay`</span><span class="at"> from </span><span class="in">`flights`</span><span class="at">.</span></span>
<span id="cb93-169"><a href="#cb93-169"></a></span>
<span id="cb93-172"><a href="#cb93-172"></a><span class="in">```{r}</span></span>
<span id="cb93-173"><a href="#cb93-173"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-174"><a href="#cb93-174"></a>  <span class="fu">select</span>(dep_time, dep_delay, arr_time, arr_delay)</span>
<span id="cb93-175"><a href="#cb93-175"></a></span>
<span id="cb93-176"><a href="#cb93-176"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-177"><a href="#cb93-177"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"dep_"</span>), <span class="fu">starts_with</span>(<span class="st">"arr_"</span>))</span>
<span id="cb93-178"><a href="#cb93-178"></a></span>
<span id="cb93-179"><a href="#cb93-179"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-180"><a href="#cb93-180"></a>  <span class="fu">select</span>(dep_time<span class="sc">:</span>arr_delay) <span class="sc">|&gt;</span> </span>
<span id="cb93-181"><a href="#cb93-181"></a>  <span class="do">## or ! instead of -</span></span>
<span id="cb93-182"><a href="#cb93-182"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</span>
<span id="cb93-183"><a href="#cb93-183"></a></span>
<span id="cb93-184"><a href="#cb93-184"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-185"><a href="#cb93-185"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"(^arr|^dep)_(time$|delay$)"</span>))</span>
<span id="cb93-186"><a href="#cb93-186"></a><span class="in">```</span></span>
<span id="cb93-187"><a href="#cb93-187"></a></span>
<span id="cb93-188"><a href="#cb93-188"></a><span class="fu">### 4.3.5.3</span></span>
<span id="cb93-189"><a href="#cb93-189"></a></span>
<span id="cb93-190"><a href="#cb93-190"></a><span class="at">&gt; What happens if you specify the name of the same variable multiple times in a </span><span class="co">[</span><span class="ot">`select()`</span><span class="co">](https://dplyr.tidyverse.org/reference/select.html)</span><span class="at"> call?</span></span>
<span id="cb93-191"><a href="#cb93-191"></a></span>
<span id="cb93-192"><a href="#cb93-192"></a>You only get the variable once!</span>
<span id="cb93-193"><a href="#cb93-193"></a></span>
<span id="cb93-196"><a href="#cb93-196"></a><span class="in">```{r}</span></span>
<span id="cb93-197"><a href="#cb93-197"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-198"><a href="#cb93-198"></a>  <span class="fu">select</span>(day, day, day)</span>
<span id="cb93-199"><a href="#cb93-199"></a><span class="in">```</span></span>
<span id="cb93-200"><a href="#cb93-200"></a></span>
<span id="cb93-201"><a href="#cb93-201"></a>Note that this is different from "base" subsetting with character vectors.</span>
<span id="cb93-202"><a href="#cb93-202"></a></span>
<span id="cb93-205"><a href="#cb93-205"></a><span class="in">```{r}</span></span>
<span id="cb93-206"><a href="#cb93-206"></a>flights[, <span class="fu">c</span>(<span class="st">"day"</span>, <span class="st">"day"</span>, <span class="st">"day"</span>)]</span>
<span id="cb93-207"><a href="#cb93-207"></a><span class="in">```</span></span>
<span id="cb93-208"><a href="#cb93-208"></a></span>
<span id="cb93-209"><a href="#cb93-209"></a><span class="fu">### 4.3.5.4</span></span>
<span id="cb93-210"><a href="#cb93-210"></a></span>
<span id="cb93-211"><a href="#cb93-211"></a><span class="at">&gt; What does the </span><span class="co">[</span><span class="ot">`any_of()`</span><span class="co">](https://tidyselect.r-lib.org/reference/all_of.html)</span><span class="at"> function do? Why might it be helpful in conjunction with this vector?</span></span>
<span id="cb93-212"><a href="#cb93-212"></a><span class="at">&gt;</span></span>
<span id="cb93-213"><a href="#cb93-213"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-214"><a href="#cb93-214"></a><span class="at">&gt; variables &lt;- c("year", "month", "day", "dep_delay", "arr_delay")</span></span>
<span id="cb93-215"><a href="#cb93-215"></a><span class="at">&gt; ```</span></span>
<span id="cb93-216"><a href="#cb93-216"></a></span>
<span id="cb93-217"><a href="#cb93-217"></a>It allows you to specify the name of variables for subsetting outside the dplyr pipeline.</span>
<span id="cb93-218"><a href="#cb93-218"></a></span>
<span id="cb93-221"><a href="#cb93-221"></a><span class="in">```{r}</span></span>
<span id="cb93-222"><a href="#cb93-222"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"dep_delay"</span>, <span class="st">"arr_delay"</span>)</span>
<span id="cb93-223"><a href="#cb93-223"></a></span>
<span id="cb93-224"><a href="#cb93-224"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-225"><a href="#cb93-225"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(variables))</span>
<span id="cb93-226"><a href="#cb93-226"></a><span class="in">```</span></span>
<span id="cb93-227"><a href="#cb93-227"></a></span>
<span id="cb93-228"><a href="#cb93-228"></a><span class="fu">### 4.3.5.5</span></span>
<span id="cb93-229"><a href="#cb93-229"></a></span>
<span id="cb93-230"><a href="#cb93-230"></a><span class="at">&gt; Does the result of running the following code surprise you? How do the select helpers deal with upper and lower case by default? How can you change that default?</span></span>
<span id="cb93-231"><a href="#cb93-231"></a></span>
<span id="cb93-234"><a href="#cb93-234"></a><span class="in">```{r}</span></span>
<span id="cb93-235"><a href="#cb93-235"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-236"><a href="#cb93-236"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"TIME"</span>))</span>
<span id="cb93-237"><a href="#cb93-237"></a><span class="in">```</span></span>
<span id="cb93-238"><a href="#cb93-238"></a></span>
<span id="cb93-239"><a href="#cb93-239"></a>Yes, it's surprising to me. The selection helpers have the argument <span class="in">`ignore.case = TRUE`</span> as a default.</span>
<span id="cb93-240"><a href="#cb93-240"></a></span>
<span id="cb93-243"><a href="#cb93-243"></a><span class="in">```{r}</span></span>
<span id="cb93-244"><a href="#cb93-244"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-245"><a href="#cb93-245"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"TIME"</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb93-246"><a href="#cb93-246"></a><span class="in">```</span></span>
<span id="cb93-247"><a href="#cb93-247"></a></span>
<span id="cb93-248"><a href="#cb93-248"></a><span class="fu">### 4.3.5.6</span></span>
<span id="cb93-249"><a href="#cb93-249"></a></span>
<span id="cb93-250"><a href="#cb93-250"></a><span class="at">&gt; Rename </span><span class="in">`air_time`</span><span class="at"> to </span><span class="in">`air_time_min`</span><span class="at"> to indicate units of measurement and move it to the beginning of the data frame.</span></span>
<span id="cb93-251"><a href="#cb93-251"></a></span>
<span id="cb93-254"><a href="#cb93-254"></a><span class="in">```{r}</span></span>
<span id="cb93-255"><a href="#cb93-255"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-256"><a href="#cb93-256"></a>  <span class="fu">rename</span>(<span class="at">air_time_min =</span> air_time) <span class="sc">|&gt;</span> </span>
<span id="cb93-257"><a href="#cb93-257"></a>  <span class="fu">relocate</span>(air_time_min)</span>
<span id="cb93-258"><a href="#cb93-258"></a><span class="in">```</span></span>
<span id="cb93-259"><a href="#cb93-259"></a></span>
<span id="cb93-260"><a href="#cb93-260"></a><span class="fu">### 4.3.5.7</span></span>
<span id="cb93-261"><a href="#cb93-261"></a></span>
<span id="cb93-262"><a href="#cb93-262"></a><span class="at">&gt; Why doesn't the following work, and what does the error mean?</span></span>
<span id="cb93-263"><a href="#cb93-263"></a></span>
<span id="cb93-266"><a href="#cb93-266"></a><span class="in">```{r}</span></span>
<span id="cb93-267"><a href="#cb93-267"></a><span class="co">#| error: true</span></span>
<span id="cb93-268"><a href="#cb93-268"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-269"><a href="#cb93-269"></a>  <span class="fu">select</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb93-270"><a href="#cb93-270"></a>  <span class="fu">arrange</span>(arr_delay)</span>
<span id="cb93-271"><a href="#cb93-271"></a><span class="in">```</span></span>
<span id="cb93-272"><a href="#cb93-272"></a></span>
<span id="cb93-273"><a href="#cb93-273"></a>Line #2 drops every variable in the data frame except <span class="in">`tailnum`</span>. Thus, there's no <span class="in">`arr_delay`</span> object for <span class="in">`arrange()`</span> to work with.</span>
<span id="cb93-274"><a href="#cb93-274"></a></span>
<span id="cb93-275"><a href="#cb93-275"></a><span class="fu">## Groups</span></span>
<span id="cb93-276"><a href="#cb93-276"></a></span>
<span id="cb93-277"><a href="#cb93-277"></a><span class="fu">### 4.5.7.1</span></span>
<span id="cb93-278"><a href="#cb93-278"></a></span>
<span id="cb93-279"><a href="#cb93-279"></a><span class="at">&gt; Which carrier has the worst average delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about flights \|</span><span class="sc">\&gt;</span><span class="at"> group_by(carrier, dest) \|</span><span class="sc">\&gt;</span><span class="at"> summarize(n()))</span></span>
<span id="cb93-280"><a href="#cb93-280"></a></span>
<span id="cb93-283"><a href="#cb93-283"></a><span class="in">```{r}</span></span>
<span id="cb93-284"><a href="#cb93-284"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-285"><a href="#cb93-285"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">|&gt;</span> </span>
<span id="cb93-286"><a href="#cb93-286"></a>  <span class="fu">summarize</span>(<span class="at">avg_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb93-287"><a href="#cb93-287"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(avg_dep_delay))</span>
<span id="cb93-288"><a href="#cb93-288"></a></span>
<span id="cb93-289"><a href="#cb93-289"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-290"><a href="#cb93-290"></a>  <span class="fu">filter</span>(carrier <span class="sc">==</span> <span class="st">"F9"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb93-291"><a href="#cb93-291"></a>  <span class="fu">count</span>(carrier, dest, origin) </span>
<span id="cb93-292"><a href="#cb93-292"></a></span>
<span id="cb93-293"><a href="#cb93-293"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-294"><a href="#cb93-294"></a>  <span class="fu">count</span>(carrier, dest) <span class="sc">|&gt;</span> </span>
<span id="cb93-295"><a href="#cb93-295"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"DEN"</span>)</span>
<span id="cb93-296"><a href="#cb93-296"></a></span>
<span id="cb93-297"><a href="#cb93-297"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-298"><a href="#cb93-298"></a>  <span class="fu">group_by</span>(carrier, dest, origin) <span class="sc">|&gt;</span> </span>
<span id="cb93-299"><a href="#cb93-299"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">avg_dd =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb93-300"><a href="#cb93-300"></a>  <span class="fu">filter</span>(dest <span class="sc">==</span> <span class="st">"DEN"</span> <span class="sc">|</span> carrier <span class="sc">==</span> <span class="st">"F9"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb93-301"><a href="#cb93-301"></a>  <span class="fu">arrange</span>(avg_dd)</span>
<span id="cb93-302"><a href="#cb93-302"></a>  </span>
<span id="cb93-303"><a href="#cb93-303"></a><span class="in">```</span></span>
<span id="cb93-304"><a href="#cb93-304"></a></span>
<span id="cb93-305"><a href="#cb93-305"></a>Frontier Airlines (F9) is headquartered in Denver and this dataset only records flights from LGA to DEN. This means there's no variance in F9 accross airports. We might be able to disentangle the effect of airport and carrier, but we will have to make assumptions.</span>
<span id="cb93-306"><a href="#cb93-306"></a></span>
<span id="cb93-307"><a href="#cb93-307"></a><span class="fu">### 4.5.7.2</span></span>
<span id="cb93-308"><a href="#cb93-308"></a></span>
<span id="cb93-309"><a href="#cb93-309"></a><span class="at">&gt; Find the flights that are most delayed upon departure from each destination.</span></span>
<span id="cb93-310"><a href="#cb93-310"></a></span>
<span id="cb93-313"><a href="#cb93-313"></a><span class="in">```{r}</span></span>
<span id="cb93-314"><a href="#cb93-314"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-315"><a href="#cb93-315"></a>  <span class="fu">group_by</span>(dest) <span class="sc">|&gt;</span> </span>
<span id="cb93-316"><a href="#cb93-316"></a>  <span class="fu">slice_max</span>(dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb93-317"><a href="#cb93-317"></a>  <span class="fu">relocate</span>(dest, carrier, dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb93-318"><a href="#cb93-318"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span>
<span id="cb93-319"><a href="#cb93-319"></a><span class="in">```</span></span>
<span id="cb93-320"><a href="#cb93-320"></a></span>
<span id="cb93-321"><a href="#cb93-321"></a><span class="fu">### 4.5.7.3</span></span>
<span id="cb93-322"><a href="#cb93-322"></a></span>
<span id="cb93-323"><a href="#cb93-323"></a><span class="at">&gt; How do delays vary over the course of the day. Illustrate your answer with a plot.</span></span>
<span id="cb93-324"><a href="#cb93-324"></a></span>
<span id="cb93-327"><a href="#cb93-327"></a><span class="in">```{r}</span></span>
<span id="cb93-328"><a href="#cb93-328"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-329"><a href="#cb93-329"></a>  <span class="fu">group_by</span>(hour) <span class="sc">|&gt;</span> </span>
<span id="cb93-330"><a href="#cb93-330"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay)) <span class="sc">|&gt;</span> </span>
<span id="cb93-331"><a href="#cb93-331"></a>  <span class="fu">summarize</span>(</span>
<span id="cb93-332"><a href="#cb93-332"></a>    <span class="at">avg =</span> <span class="fu">mean</span>(dep_delay),</span>
<span id="cb93-333"><a href="#cb93-333"></a>    <span class="at">se =</span> <span class="fu">sd</span>(dep_delay) <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>())</span>
<span id="cb93-334"><a href="#cb93-334"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb93-335"><a href="#cb93-335"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(hour, avg)) <span class="sc">+</span> </span>
<span id="cb93-336"><a href="#cb93-336"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> avg <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span>se, <span class="at">ymax =</span> avg <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>se), <span class="at">size =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb93-337"><a href="#cb93-337"></a>  <span class="fu">theme_light</span>()</span>
<span id="cb93-338"><a href="#cb93-338"></a><span class="in">```</span></span>
<span id="cb93-339"><a href="#cb93-339"></a></span>
<span id="cb93-340"><a href="#cb93-340"></a><span class="fu">### 4.5.7.4</span></span>
<span id="cb93-341"><a href="#cb93-341"></a></span>
<span id="cb93-342"><a href="#cb93-342"></a><span class="at">&gt; What happens if you supply a negative </span><span class="in">`n`</span><span class="at"> to </span><span class="co">[</span><span class="ot">`slice_min()`</span><span class="co">](https://dplyr.tidyverse.org/reference/slice.html)</span><span class="at"> and friends?</span></span>
<span id="cb93-343"><a href="#cb93-343"></a></span>
<span id="cb93-344"><a href="#cb93-344"></a>The documentation for this behavior is not great and I can't think of a single example in which I'd use those functions that way instead of using <span class="in">`arrange()`</span>.</span>
<span id="cb93-345"><a href="#cb93-345"></a></span>
<span id="cb93-348"><a href="#cb93-348"></a><span class="in">```{r}</span></span>
<span id="cb93-349"><a href="#cb93-349"></a>A <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb93-350"><a href="#cb93-350"></a>  <span class="fu">slice_min</span>(dep_delay, <span class="at">n =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb93-351"><a href="#cb93-351"></a></span>
<span id="cb93-352"><a href="#cb93-352"></a>B <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb93-353"><a href="#cb93-353"></a>  <span class="fu">arrange</span>(dep_delay)</span>
<span id="cb93-354"><a href="#cb93-354"></a></span>
<span id="cb93-355"><a href="#cb93-355"></a><span class="fu">identical</span>(A, B)</span>
<span id="cb93-356"><a href="#cb93-356"></a></span>
<span id="cb93-357"><a href="#cb93-357"></a>C <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb93-358"><a href="#cb93-358"></a>  <span class="fu">slice_max</span>(dep_delay, <span class="at">n =</span> <span class="sc">-</span><span class="dv">1</span>) </span>
<span id="cb93-359"><a href="#cb93-359"></a></span>
<span id="cb93-360"><a href="#cb93-360"></a>D <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb93-361"><a href="#cb93-361"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span>
<span id="cb93-362"><a href="#cb93-362"></a></span>
<span id="cb93-363"><a href="#cb93-363"></a><span class="fu">identical</span>(C, D)</span>
<span id="cb93-364"><a href="#cb93-364"></a><span class="in">```</span></span>
<span id="cb93-365"><a href="#cb93-365"></a></span>
<span id="cb93-366"><a href="#cb93-366"></a><span class="fu">### 4.5.7.5</span></span>
<span id="cb93-367"><a href="#cb93-367"></a></span>
<span id="cb93-368"><a href="#cb93-368"></a><span class="at">&gt; Explain what </span><span class="co">[</span><span class="ot">`count()`</span><span class="co">](https://dplyr.tidyverse.org/reference/count.html)</span><span class="at"> does in terms of the dplyr verbs you just learned. What does the </span><span class="in">`sort`</span><span class="at"> argument to </span><span class="co">[</span><span class="ot">`count()`</span><span class="co">](https://dplyr.tidyverse.org/reference/count.html)</span><span class="at"> do?</span></span>
<span id="cb93-369"><a href="#cb93-369"></a></span>
<span id="cb93-370"><a href="#cb93-370"></a>Count is a short-hand for <span class="in">`group_by`</span> + <span class="in">`summarize`</span>. The <span class="in">`sort`</span> argument accomplishes the same as <span class="in">`arrange`</span>.</span>
<span id="cb93-371"><a href="#cb93-371"></a></span>
<span id="cb93-374"><a href="#cb93-374"></a><span class="in">```{r}</span></span>
<span id="cb93-375"><a href="#cb93-375"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-376"><a href="#cb93-376"></a>  <span class="fu">group_by</span>(origin) <span class="sc">|&gt;</span> </span>
<span id="cb93-377"><a href="#cb93-377"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb93-378"><a href="#cb93-378"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb93-379"><a href="#cb93-379"></a></span>
<span id="cb93-380"><a href="#cb93-380"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb93-381"><a href="#cb93-381"></a>  <span class="fu">count</span>(origin, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb93-382"><a href="#cb93-382"></a><span class="in">```</span></span>
<span id="cb93-383"><a href="#cb93-383"></a></span>
<span id="cb93-384"><a href="#cb93-384"></a><span class="fu">### 4.5.7.6</span></span>
<span id="cb93-385"><a href="#cb93-385"></a></span>
<span id="cb93-386"><a href="#cb93-386"></a><span class="at">&gt; Suppose we have the following tiny data frame:</span></span>
<span id="cb93-387"><a href="#cb93-387"></a><span class="at">&gt;</span></span>
<span id="cb93-388"><a href="#cb93-388"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-389"><a href="#cb93-389"></a><span class="at">&gt; df &lt;- tibble(</span></span>
<span id="cb93-390"><a href="#cb93-390"></a><span class="at">&gt;   x = 1:5,</span></span>
<span id="cb93-391"><a href="#cb93-391"></a><span class="at">&gt;   y = c("a", "b", "a", "a", "b"),</span></span>
<span id="cb93-392"><a href="#cb93-392"></a><span class="at">&gt;   z = c("K", "K", "L", "L", "K")</span></span>
<span id="cb93-393"><a href="#cb93-393"></a><span class="at">&gt; )</span></span>
<span id="cb93-394"><a href="#cb93-394"></a><span class="at">&gt; ```</span></span>
<span id="cb93-395"><a href="#cb93-395"></a><span class="at">&gt;</span></span>
<span id="cb93-396"><a href="#cb93-396"></a><span class="at">&gt; Write down what you think the output will look like, then check if you were correct, and describe what </span><span class="co">[</span><span class="ot">`group_by()`</span><span class="co">](https://dplyr.tidyverse.org/reference/group_by.html)</span><span class="at"> does.</span></span>
<span id="cb93-397"><a href="#cb93-397"></a><span class="at">&gt;</span></span>
<span id="cb93-398"><a href="#cb93-398"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-399"><a href="#cb93-399"></a><span class="at">&gt; #| eval: false</span></span>
<span id="cb93-400"><a href="#cb93-400"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-401"><a href="#cb93-401"></a><span class="at">&gt;   group_by(y)</span></span>
<span id="cb93-402"><a href="#cb93-402"></a><span class="at">&gt; ```</span></span>
<span id="cb93-403"><a href="#cb93-403"></a></span>
<span id="cb93-404"><a href="#cb93-404"></a>*two groups?*</span>
<span id="cb93-405"><a href="#cb93-405"></a></span>
<span id="cb93-408"><a href="#cb93-408"></a><span class="in">```{r}</span></span>
<span id="cb93-409"><a href="#cb93-409"></a>df <span class="sc">|&gt;</span> <span class="fu">group_by</span>(y)</span>
<span id="cb93-410"><a href="#cb93-410"></a><span class="in">```</span></span>
<span id="cb93-411"><a href="#cb93-411"></a></span>
<span id="cb93-412"><a href="#cb93-412"></a><span class="at">&gt; Write down what you think the output will look like, then check if you were correct, and describe what </span><span class="in">`arrange()`</span><span class="at"> does. Also comment on how it's different from the </span><span class="in">`group_by()`</span><span class="at"> in part (a)?</span></span>
<span id="cb93-413"><a href="#cb93-413"></a><span class="at">&gt;</span></span>
<span id="cb93-414"><a href="#cb93-414"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-415"><a href="#cb93-415"></a><span class="at">&gt; #| eval: false</span></span>
<span id="cb93-416"><a href="#cb93-416"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-417"><a href="#cb93-417"></a><span class="at">&gt;   arrange(y)</span></span>
<span id="cb93-418"><a href="#cb93-418"></a><span class="at">&gt; ```</span></span>
<span id="cb93-419"><a href="#cb93-419"></a></span>
<span id="cb93-420"><a href="#cb93-420"></a>*I assume that y will be a, a, a, b, b and that x will be 1, 3, 4, 2, 5*</span>
<span id="cb93-421"><a href="#cb93-421"></a></span>
<span id="cb93-424"><a href="#cb93-424"></a><span class="in">```{r}</span></span>
<span id="cb93-425"><a href="#cb93-425"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-426"><a href="#cb93-426"></a>  <span class="fu">arrange</span>(y)</span>
<span id="cb93-427"><a href="#cb93-427"></a><span class="in">```</span></span>
<span id="cb93-428"><a href="#cb93-428"></a></span>
<span id="cb93-429"><a href="#cb93-429"></a><span class="at">&gt; Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does.</span></span>
<span id="cb93-430"><a href="#cb93-430"></a><span class="at">&gt;</span></span>
<span id="cb93-431"><a href="#cb93-431"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-432"><a href="#cb93-432"></a><span class="at">&gt; #| eval: false</span></span>
<span id="cb93-433"><a href="#cb93-433"></a><span class="at">&gt;</span></span>
<span id="cb93-434"><a href="#cb93-434"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-435"><a href="#cb93-435"></a><span class="at">&gt;   group_by(y) |&gt;</span></span>
<span id="cb93-436"><a href="#cb93-436"></a><span class="at">&gt;   summarize(mean_x = mean(x))</span></span>
<span id="cb93-437"><a href="#cb93-437"></a><span class="at">&gt; ```</span></span>
<span id="cb93-438"><a href="#cb93-438"></a></span>
<span id="cb93-439"><a href="#cb93-439"></a>I assume the new data frame will have two columns (<span class="in">`x`</span>, <span class="in">`y`</span>) and two rows (<span class="in">`y = 2.67`</span>, <span class="in">`y = 3.5`</span>)</span>
<span id="cb93-440"><a href="#cb93-440"></a></span>
<span id="cb93-443"><a href="#cb93-443"></a><span class="in">```{r}</span></span>
<span id="cb93-444"><a href="#cb93-444"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-445"><a href="#cb93-445"></a>  <span class="fu">group_by</span>(y) <span class="sc">|&gt;</span></span>
<span id="cb93-446"><a href="#cb93-446"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span>
<span id="cb93-447"><a href="#cb93-447"></a><span class="in">```</span></span>
<span id="cb93-448"><a href="#cb93-448"></a></span>
<span id="cb93-449"><a href="#cb93-449"></a><span class="at">&gt; Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does. Then, comment on what the message says.</span></span>
<span id="cb93-450"><a href="#cb93-450"></a><span class="at">&gt;</span></span>
<span id="cb93-451"><a href="#cb93-451"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-452"><a href="#cb93-452"></a><span class="at">&gt; #| eval: false</span></span>
<span id="cb93-453"><a href="#cb93-453"></a><span class="at">&gt;</span></span>
<span id="cb93-454"><a href="#cb93-454"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-455"><a href="#cb93-455"></a><span class="at">&gt;   group_by(y, z) |&gt;</span></span>
<span id="cb93-456"><a href="#cb93-456"></a><span class="at">&gt;   summarize(mean_x = mean(x))</span></span>
<span id="cb93-457"><a href="#cb93-457"></a><span class="at">&gt; ```</span></span>
<span id="cb93-458"><a href="#cb93-458"></a></span>
<span id="cb93-459"><a href="#cb93-459"></a>I assume there will be 3 columns (<span class="in">`x`</span>, <span class="in">`y`</span>, <span class="in">`z`</span>) and three rows (<span class="in">`x = c(1, 3.5, 3.5)`</span>).</span>
<span id="cb93-460"><a href="#cb93-460"></a></span>
<span id="cb93-463"><a href="#cb93-463"></a><span class="in">```{r}</span></span>
<span id="cb93-464"><a href="#cb93-464"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-465"><a href="#cb93-465"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb93-466"><a href="#cb93-466"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span>
<span id="cb93-467"><a href="#cb93-467"></a><span class="in">```</span></span>
<span id="cb93-468"><a href="#cb93-468"></a></span>
<span id="cb93-469"><a href="#cb93-469"></a><span class="at">&gt; Write down what you think the output will look like, then check if you were correct, and describe what the pipeline does. How is the output different from the one in part (d).</span></span>
<span id="cb93-470"><a href="#cb93-470"></a><span class="at">&gt;</span></span>
<span id="cb93-471"><a href="#cb93-471"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-472"><a href="#cb93-472"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-473"><a href="#cb93-473"></a><span class="at">&gt;   group_by(y, z) |&gt;</span></span>
<span id="cb93-474"><a href="#cb93-474"></a><span class="at">&gt;   summarize(mean_x = mean(x), .groups = "drop")</span></span>
<span id="cb93-475"><a href="#cb93-475"></a><span class="at">&gt; ```</span></span>
<span id="cb93-476"><a href="#cb93-476"></a></span>
<span id="cb93-477"><a href="#cb93-477"></a>I assume the same answer, except the output won't be "grouped."</span>
<span id="cb93-478"><a href="#cb93-478"></a></span>
<span id="cb93-481"><a href="#cb93-481"></a><span class="in">```{r}</span></span>
<span id="cb93-482"><a href="#cb93-482"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-483"><a href="#cb93-483"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb93-484"><a href="#cb93-484"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb93-485"><a href="#cb93-485"></a><span class="in">```</span></span>
<span id="cb93-486"><a href="#cb93-486"></a></span>
<span id="cb93-487"><a href="#cb93-487"></a><span class="at">&gt; Write down what you think the outputs will look like, then check if you were correct, and describe what each pipeline does. How are the outputs of the two pipelines different?</span></span>
<span id="cb93-488"><a href="#cb93-488"></a><span class="at">&gt;</span></span>
<span id="cb93-489"><a href="#cb93-489"></a><span class="at">&gt; ```{r}</span></span>
<span id="cb93-490"><a href="#cb93-490"></a><span class="at">&gt; #| eval: false</span></span>
<span id="cb93-491"><a href="#cb93-491"></a><span class="at">&gt;</span></span>
<span id="cb93-492"><a href="#cb93-492"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-493"><a href="#cb93-493"></a><span class="at">&gt;   group_by(y, z) |&gt;</span></span>
<span id="cb93-494"><a href="#cb93-494"></a><span class="at">&gt;   summarize(mean_x = mean(x))</span></span>
<span id="cb93-495"><a href="#cb93-495"></a><span class="at">&gt;</span></span>
<span id="cb93-496"><a href="#cb93-496"></a><span class="at">&gt; df |&gt;</span></span>
<span id="cb93-497"><a href="#cb93-497"></a><span class="at">&gt;   group_by(y, z) |&gt;</span></span>
<span id="cb93-498"><a href="#cb93-498"></a><span class="at">&gt;   mutate(mean_x = mean(x))</span></span>
<span id="cb93-499"><a href="#cb93-499"></a><span class="at">&gt; ```</span></span>
<span id="cb93-500"><a href="#cb93-500"></a></span>
<span id="cb93-501"><a href="#cb93-501"></a>The results will be similar, except that the first pipeline will have 3 rows and the second one will have 5 rows.</span>
<span id="cb93-502"><a href="#cb93-502"></a></span>
<span id="cb93-505"><a href="#cb93-505"></a><span class="in">```{r}</span></span>
<span id="cb93-506"><a href="#cb93-506"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-507"><a href="#cb93-507"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb93-508"><a href="#cb93-508"></a>  <span class="fu">summarize</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span>
<span id="cb93-509"><a href="#cb93-509"></a></span>
<span id="cb93-510"><a href="#cb93-510"></a>df <span class="sc">|&gt;</span></span>
<span id="cb93-511"><a href="#cb93-511"></a>  <span class="fu">group_by</span>(y, z) <span class="sc">|&gt;</span></span>
<span id="cb93-512"><a href="#cb93-512"></a>  <span class="fu">mutate</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x))</span>
<span id="cb93-513"><a href="#cb93-513"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>