<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Social Statistics I (Exercises) - 24&nbsp; Solutions 12</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./solutions-11.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="stylesheet" media="screen" href="https://www.cssfontstack.com/Optima" type="text/css">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./sec-solutions.html">Solutions</a></li><li class="breadcrumb-item"><a href="./solutions-12.html"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Solutions 12</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Social Statistics I (Exercises)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computing preliminaries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week 2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data, sampling, and probability</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week 4</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Week 9</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Week 10</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Week 11</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Week 12</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec-solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solutions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Solutions 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Solutions 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Solutions 3</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Solutions 4</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Solutions 5</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Solutions 6</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Solutions 7</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Solutions 8</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Solutions 9</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Solutions 10</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Solutions 11</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./solutions-12.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Solutions 12</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#exercise" id="toc-exercise" class="nav-link active" data-scroll-target="#exercise"><span class="header-section-number">24.1</span> Exercise</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1"><span class="header-section-number">24.2</span> Exercise</a></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2"><span class="header-section-number">24.3</span> Exercise</a></li>
  <li><a href="#exercise-3" id="toc-exercise-3" class="nav-link" data-scroll-target="#exercise-3"><span class="header-section-number">24.4</span> Exercise</a></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4"><span class="header-section-number">24.5</span> Exercise</a></li>
  <li><a href="#exercise-5" id="toc-exercise-5" class="nav-link" data-scroll-target="#exercise-5"><span class="header-section-number">24.6</span> Exercise</a></li>
  <li><a href="#exercise-6" id="toc-exercise-6" class="nav-link" data-scroll-target="#exercise-6"><span class="header-section-number">24.7</span> Exercise</a></li>
  <li><a href="#exercise-7" id="toc-exercise-7" class="nav-link" data-scroll-target="#exercise-7"><span class="header-section-number">24.8</span> Exercise</a></li>
  <li><a href="#exercise-8" id="toc-exercise-8" class="nav-link" data-scroll-target="#exercise-8"><span class="header-section-number">24.9</span> Exercise</a></li>
  <li><a href="#exercise-9" id="toc-exercise-9" class="nav-link" data-scroll-target="#exercise-9"><span class="header-section-number">24.10</span> Exercise</a></li>
  <li><a href="#exercise-10" id="toc-exercise-10" class="nav-link" data-scroll-target="#exercise-10"><span class="header-section-number">24.11</span> Exercise</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Solutions 12</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>(<span class="at">base_family =</span> <span class="st">"Optima"</span>))</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(performance)</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(gssr)</span>
<span id="cb1-10"><a href="#cb1-10"></a>gss18 <span class="ot">&lt;-</span> <span class="fu">gss_get_yr</span>(<span class="dv">2018</span>) </span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="st">"coninc"</span>, <span class="st">"height"</span>, <span class="st">"hompop"</span>, <span class="st">"sibs"</span>, <span class="st">"numwomen"</span>, <span class="st">"nummen"</span>, <span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"race"</span>, <span class="st">"attend"</span>, <span class="st">"polviews"</span>, <span class="st">"degree"</span>,</span>
<span id="cb1-14"><a href="#cb1-14"></a>  <span class="st">"happy"</span>, <span class="st">"sexornt"</span>, <span class="st">"premarsx"</span>, <span class="st">"condom"</span>, <span class="st">"wrkslf"</span>, <span class="st">"fefam"</span>, <span class="st">"cappun"</span>, <span class="st">"padeg"</span>, <span class="st">"madeg"</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>)</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a>d <span class="ot">&lt;-</span> gss18 <span class="sc">|&gt;</span> </span>
<span id="cb1-18"><a href="#cb1-18"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(vars)) <span class="sc">|&gt;</span> </span>
<span id="cb1-19"><a href="#cb1-19"></a>  haven<span class="sc">::</span><span class="fu">zap_missing</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-20"><a href="#cb1-20"></a>  <span class="do">## continuous vars </span></span>
<span id="cb1-21"><a href="#cb1-21"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]), haven<span class="sc">::</span>zap_labels)) <span class="sc">|&gt;</span> </span>
<span id="cb1-22"><a href="#cb1-22"></a>  <span class="do">## categorical vars</span></span>
<span id="cb1-23"><a href="#cb1-23"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">!</span><span class="fu">all_of</span>(vars[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]), haven<span class="sc">::</span>as_factor)) <span class="sc">|&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>  <span class="fu">mutate</span>(<span class="at">numtot =</span> numwomen <span class="sc">+</span> nummen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="exercise" class="level2" data-number="24.1">
<h2 data-number="24.1" class="anchored" data-anchor-id="exercise"><span class="header-section-number">24.1</span> Exercise</h2>
<p><strong>Some intuition behind the math</strong></p>
<p>The formula for the normal distribution is awkward, but it’s a good idea to spend some time figuring out why it looks like that.</p>
<p>Plot the following functions in R:</p>
<ul>
<li><span class="math inline">\(f(x) = (x - \mu)^2\)</span></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><span class="math inline">\(f(x) = -(x - \mu)^2\)</span></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) <span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><span class="math inline">\(f(x) = e^{-(x - \mu)^2}\)</span></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-1" class="level2" data-number="24.2">
<h2 data-number="24.2" class="anchored" data-anchor-id="exercise-1"><span class="header-section-number">24.2</span> Exercise</h2>
<p>The function <span class="math inline">\(f(x) = e^{-x^2}\)</span> already looks a lot like the normal distribution, but we’re not quite there yet. It is <em>not</em> a probability distribution because the <em>area under the curve</em> is larger than 1; probabilities can only add up to 1!</p>
<p>Using some <a href="https://www.integral-calculator.com/#expr=e%5E-x%5E2&amp;lbound=minf&amp;ubound=inf">integral calculus</a>, we can tell that this area adds up to approximately 1.77.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">integrate</span>(<span class="at">f =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>), <span class="at">lower =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">upper =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>1.772454 with absolute error &lt; 4.3e-06</code></pre>
</div>
</div>
<p>Answer these two questions:</p>
<ul>
<li>What is the squared root of <span class="math inline">\(\pi\)</span> ?</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">sqrt</span>(pi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.772454</code></pre>
</div>
</div>
<ul>
<li><p>What is the area under the curve for this function?</p>
<p><span class="math display">\[
f(x) = \frac{1}{\sqrt{\pi}} e^{-x^2}
\]</span></p></li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">integrate</span>(<span class="at">f =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(pi), <span class="at">lower =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">upper =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>1 with absolute error &lt; 2.4e-06</code></pre>
</div>
</div>
</section>
<section id="exercise-2" class="level2" data-number="24.3">
<h2 data-number="24.3" class="anchored" data-anchor-id="exercise-2"><span class="header-section-number">24.3</span> Exercise</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Go to the GSS data for 2018 and use a normal linear regression to estimate <code>height</code> from <code>male</code> (an indicator variable equals 1 when <code>sex == "male"</code>).</p>
<p>Interpret the intercept and the slope coefficients ( <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> ).</p>
<p>After doing this add <code>age</code> as a second predictor.</p>
<p>Interpret the intercept and the slope coefficients ( <span class="math inline">\(\alpha\)</span>, <span class="math inline">\(\beta_1\)</span>, and <span class="math inline">\(\beta_2\)</span> ).</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">male =</span> <span class="fu">as.integer</span>(sex <span class="sc">==</span> <span class="st">"male"</span>)) </span>
<span id="cb11-3"><a href="#cb11-3"></a>  </span>
<span id="cb11-4"><a href="#cb11-4"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(height <span class="sc">~</span> male, <span class="at">data =</span> d)</span>
<span id="cb11-5"><a href="#cb11-5"></a>ols2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(height <span class="sc">~</span> male <span class="sc">+</span> age, <span class="at">data =</span> d)</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(ols, ols2), <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="utnzbncfwh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#utnzbncfwh table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#utnzbncfwh thead, #utnzbncfwh tbody, #utnzbncfwh tfoot, #utnzbncfwh tr, #utnzbncfwh td, #utnzbncfwh th {
  border-style: none;
}

#utnzbncfwh p {
  margin: 0;
  padding: 0;
}

#utnzbncfwh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#utnzbncfwh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#utnzbncfwh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#utnzbncfwh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#utnzbncfwh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#utnzbncfwh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utnzbncfwh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#utnzbncfwh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#utnzbncfwh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#utnzbncfwh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#utnzbncfwh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#utnzbncfwh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#utnzbncfwh .gt_spanner_row {
  border-bottom-style: hidden;
}

#utnzbncfwh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#utnzbncfwh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#utnzbncfwh .gt_from_md > :first-child {
  margin-top: 0;
}

#utnzbncfwh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#utnzbncfwh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#utnzbncfwh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#utnzbncfwh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#utnzbncfwh .gt_row_group_first td {
  border-top-width: 2px;
}

#utnzbncfwh .gt_row_group_first th {
  border-top-width: 2px;
}

#utnzbncfwh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#utnzbncfwh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#utnzbncfwh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#utnzbncfwh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utnzbncfwh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#utnzbncfwh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#utnzbncfwh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#utnzbncfwh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#utnzbncfwh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utnzbncfwh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#utnzbncfwh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#utnzbncfwh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#utnzbncfwh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#utnzbncfwh .gt_left {
  text-align: left;
}

#utnzbncfwh .gt_center {
  text-align: center;
}

#utnzbncfwh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#utnzbncfwh .gt_font_normal {
  font-weight: normal;
}

#utnzbncfwh .gt_font_bold {
  font-weight: bold;
}

#utnzbncfwh .gt_font_italic {
  font-style: italic;
}

#utnzbncfwh .gt_super {
  font-size: 65%;
}

#utnzbncfwh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#utnzbncfwh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#utnzbncfwh .gt_indent_1 {
  text-indent: 5px;
}

#utnzbncfwh .gt_indent_2 {
  text-indent: 10px;
}

#utnzbncfwh .gt_indent_3 {
  text-indent: 15px;
}

#utnzbncfwh .gt_indent_4 {
  text-indent: 20px;
}

#utnzbncfwh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(2)">(2)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">64.410</td>
<td headers="(2)" class="gt_row gt_center">64.469</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(0.111)</td>
<td headers="(2)" class="gt_row gt_center">(0.270)</td></tr>
    <tr><td headers="" class="gt_row gt_left">male</td>
<td headers="(1)" class="gt_row gt_center">5.703</td>
<td headers="(2)" class="gt_row gt_center">5.706</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(0.161)</td>
<td headers="(2)" class="gt_row gt_center">(0.161)</td></tr>
    <tr><td headers="" class="gt_row gt_left">age</td>
<td headers="(1)" class="gt_row gt_center"></td>
<td headers="(2)" class="gt_row gt_center">-0.001</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center"></td>
<td headers="(2)" class="gt_row gt_center">(0.006)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p><em>Model 1.</em></p>
<p>The <span class="math inline">\(\alpha\)</span> indicates the average height for women. The <span class="math inline">\(\beta\)</span> indicates the associated increase in height for men (compared to women)—i.e., men are (on average) 5.7 (inches?) taller than women.</p>
<p><em>Model 2.</em></p>
<p>The <span class="math inline">\(\alpha\)</span> indicates the average height for women that are <em>age zero</em>. The <span class="math inline">\(\beta_\text{male}\)</span> indicates the associated increase in height for men (compared to women)—i.e., men are (on average) 5.7 (inches?) taller than women. The <span class="math inline">\(\beta_\text{age}\)</span> is too noisy (“not statistically significant”) and is negative. This means that for every additional year the respondent is predicted to be 0.001 inches shorter. Does this makes sense? No it does not make sense. People grow up as they age, but the sample doesn’t include anyone under the age of 18 (presumably when people have stop growing). Thus, the model doesn’t pick up on this and is happy to assume that a newborn woman is 64 inches tall.</p>
<p>I’ll show you two ways of visualizing this.</p>
<ol type="1">
<li>Using the <code>ggpredict()</code> function that Steve likes so much.</li>
</ol>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>ggeffects<span class="sc">::</span><span class="fu">ggpredict</span>(ols2, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"male"</span>)) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="2" type="1">
<li>Using <code>broom::augment()</code> + <code>ggplot()</code></li>
</ol>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">augment</span>(ols2, <span class="at">interval =</span> <span class="st">"confidence"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">if_else</span>(male <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"men"</span>, <span class="st">"women"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, .fitted, <span class="at">fill =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span> </span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-3" class="level2" data-number="24.4">
<h2 data-number="24.4" class="anchored" data-anchor-id="exercise-3"><span class="header-section-number">24.4</span> Exercise</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Polynomial Regression</strong></p>
<p>Using the same GSS data, predict <code>coninc</code> (inflation-adjusted family income) from <code>age</code> and <code>age_squared</code>.</p>
<p><span class="math display">\[
\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i
\]</span></p>
<p>What does the <span class="math inline">\(\beta_0\)</span> coefficient mean here?</p>
<p>Plot the predictions from this model using a new dataset that contains ages 18 to 85.</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age <span class="sc">+</span> <span class="fu">I</span>(age<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">modelsummary</span>(m2, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="gjkczbmtbi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gjkczbmtbi table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gjkczbmtbi thead, #gjkczbmtbi tbody, #gjkczbmtbi tfoot, #gjkczbmtbi tr, #gjkczbmtbi td, #gjkczbmtbi th {
  border-style: none;
}

#gjkczbmtbi p {
  margin: 0;
  padding: 0;
}

#gjkczbmtbi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gjkczbmtbi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gjkczbmtbi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gjkczbmtbi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gjkczbmtbi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjkczbmtbi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjkczbmtbi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjkczbmtbi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gjkczbmtbi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gjkczbmtbi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gjkczbmtbi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gjkczbmtbi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gjkczbmtbi .gt_spanner_row {
  border-bottom-style: hidden;
}

#gjkczbmtbi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gjkczbmtbi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gjkczbmtbi .gt_from_md > :first-child {
  margin-top: 0;
}

#gjkczbmtbi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gjkczbmtbi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gjkczbmtbi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gjkczbmtbi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gjkczbmtbi .gt_row_group_first td {
  border-top-width: 2px;
}

#gjkczbmtbi .gt_row_group_first th {
  border-top-width: 2px;
}

#gjkczbmtbi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjkczbmtbi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gjkczbmtbi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gjkczbmtbi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjkczbmtbi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjkczbmtbi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gjkczbmtbi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gjkczbmtbi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gjkczbmtbi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjkczbmtbi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjkczbmtbi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjkczbmtbi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjkczbmtbi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjkczbmtbi .gt_left {
  text-align: left;
}

#gjkczbmtbi .gt_center {
  text-align: center;
}

#gjkczbmtbi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gjkczbmtbi .gt_font_normal {
  font-weight: normal;
}

#gjkczbmtbi .gt_font_bold {
  font-weight: bold;
}

#gjkczbmtbi .gt_font_italic {
  font-style: italic;
}

#gjkczbmtbi .gt_super {
  font-size: 65%;
}

#gjkczbmtbi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gjkczbmtbi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gjkczbmtbi .gt_indent_1 {
  text-indent: 5px;
}

#gjkczbmtbi .gt_indent_2 {
  text-indent: 10px;
}

#gjkczbmtbi .gt_indent_3 {
  text-indent: 15px;
}

#gjkczbmtbi .gt_indent_4 {
  text-indent: 20px;
}

#gjkczbmtbi .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">-15627.326</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(6832.034)</td></tr>
    <tr><td headers="" class="gt_row gt_left">age</td>
<td headers="(1)" class="gt_row gt_center">2820.031</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(286.520)</td></tr>
    <tr><td headers="" class="gt_row gt_left">I(age^2)</td>
<td headers="(1)" class="gt_row gt_center">-26.706</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(2.765)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The <span class="math inline">\(\alpha\)</span> is kinda meaningless. It corresponds to the average income of a person of age zero.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">80</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">augment</span>(m2, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, .fitted)) <span class="sc">+</span> </span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-4" class="level2" data-number="24.5">
<h2 data-number="24.5" class="anchored" data-anchor-id="exercise-4"><span class="header-section-number">24.5</span> Exercise</h2>
<p><strong>Transformations</strong></p>
<p>Transform the age variable so that it’s centered around the mean.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">mutate</span>(<span class="at">age_centered =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Fit the same model you fitted earlier:</p>
<p><span class="math display">\[
\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i
\]</span></p>
<p>What changed and what remained the same?</p>
<p>What does the <span class="math inline">\(\beta_0\)</span> coefficient mean here?</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age_centered <span class="sc">+</span> <span class="fu">I</span>(age_centered<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">modelsummary</span>(m3, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="fdsfpmuglz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fdsfpmuglz table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fdsfpmuglz thead, #fdsfpmuglz tbody, #fdsfpmuglz tfoot, #fdsfpmuglz tr, #fdsfpmuglz td, #fdsfpmuglz th {
  border-style: none;
}

#fdsfpmuglz p {
  margin: 0;
  padding: 0;
}

#fdsfpmuglz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fdsfpmuglz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fdsfpmuglz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fdsfpmuglz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fdsfpmuglz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fdsfpmuglz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdsfpmuglz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fdsfpmuglz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fdsfpmuglz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fdsfpmuglz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fdsfpmuglz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fdsfpmuglz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fdsfpmuglz .gt_spanner_row {
  border-bottom-style: hidden;
}

#fdsfpmuglz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fdsfpmuglz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fdsfpmuglz .gt_from_md > :first-child {
  margin-top: 0;
}

#fdsfpmuglz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fdsfpmuglz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fdsfpmuglz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fdsfpmuglz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fdsfpmuglz .gt_row_group_first td {
  border-top-width: 2px;
}

#fdsfpmuglz .gt_row_group_first th {
  border-top-width: 2px;
}

#fdsfpmuglz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdsfpmuglz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fdsfpmuglz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fdsfpmuglz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdsfpmuglz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdsfpmuglz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fdsfpmuglz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fdsfpmuglz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fdsfpmuglz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fdsfpmuglz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fdsfpmuglz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdsfpmuglz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fdsfpmuglz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fdsfpmuglz .gt_left {
  text-align: left;
}

#fdsfpmuglz .gt_center {
  text-align: center;
}

#fdsfpmuglz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fdsfpmuglz .gt_font_normal {
  font-weight: normal;
}

#fdsfpmuglz .gt_font_bold {
  font-weight: bold;
}

#fdsfpmuglz .gt_font_italic {
  font-style: italic;
}

#fdsfpmuglz .gt_super {
  font-size: 65%;
}

#fdsfpmuglz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fdsfpmuglz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fdsfpmuglz .gt_indent_1 {
  text-indent: 5px;
}

#fdsfpmuglz .gt_indent_2 {
  text-indent: 10px;
}

#fdsfpmuglz .gt_indent_3 {
  text-indent: 15px;
}

#fdsfpmuglz .gt_indent_4 {
  text-indent: 20px;
}

#fdsfpmuglz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">58427.559</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(1251.135)</td></tr>
    <tr><td headers="" class="gt_row gt_left">age_centered</td>
<td headers="(1)" class="gt_row gt_center">204.384</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(51.712)</td></tr>
    <tr><td headers="" class="gt_row gt_left">I(age_centered^2)</td>
<td headers="(1)" class="gt_row gt_center">-26.706</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(2.765)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The <span class="math inline">\(\beta_0\)</span> coefficient now means the expected income for a person of average age (in the sample).</p>
<p>The average person is 49 years old.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 48.97138</code></pre>
</div>
</div>
<p>The average person is expected to have an income of $58,427.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age_centered =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">80</span> <span class="sc">-</span> <span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="fu">augment</span>(m3, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_centered, .fitted)) <span class="sc">+</span> </span>
<span id="cb20-5"><a href="#cb20-5"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb20-6"><a href="#cb20-6"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exercise-5" class="level2" data-number="24.6">
<h2 data-number="24.6" class="anchored" data-anchor-id="exercise-5"><span class="header-section-number">24.6</span> Exercise</h2>
<p><strong>Transformations</strong></p>
<p>Transform the age variable so that it’s in standard deviations away from the mean.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">mutate</span>(<span class="at">age_std =</span> (age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Fit the same model you fitted earlier:</p>
<p><span class="math display">\[
\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i
\]</span></p>
<p>What changed and what remained the same?</p>
<p>What does the <span class="math inline">\(\beta_0\)</span> coefficient mean here?</p>
<p>How would you interpret the <span class="math inline">\(\beta_1\)</span> and <span class="math inline">\(\beta_2\)</span> coefficients?</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age_std <span class="sc">+</span> <span class="fu">I</span>(age_std<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="fu">modelsummary</span>(m4, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="kbtynkrdps" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kbtynkrdps table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kbtynkrdps thead, #kbtynkrdps tbody, #kbtynkrdps tfoot, #kbtynkrdps tr, #kbtynkrdps td, #kbtynkrdps th {
  border-style: none;
}

#kbtynkrdps p {
  margin: 0;
  padding: 0;
}

#kbtynkrdps .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kbtynkrdps .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kbtynkrdps .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kbtynkrdps .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kbtynkrdps .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kbtynkrdps .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kbtynkrdps .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kbtynkrdps .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kbtynkrdps .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kbtynkrdps .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kbtynkrdps .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kbtynkrdps .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kbtynkrdps .gt_spanner_row {
  border-bottom-style: hidden;
}

#kbtynkrdps .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kbtynkrdps .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kbtynkrdps .gt_from_md > :first-child {
  margin-top: 0;
}

#kbtynkrdps .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kbtynkrdps .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kbtynkrdps .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kbtynkrdps .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kbtynkrdps .gt_row_group_first td {
  border-top-width: 2px;
}

#kbtynkrdps .gt_row_group_first th {
  border-top-width: 2px;
}

#kbtynkrdps .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kbtynkrdps .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kbtynkrdps .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kbtynkrdps .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kbtynkrdps .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kbtynkrdps .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kbtynkrdps .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kbtynkrdps .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kbtynkrdps .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kbtynkrdps .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kbtynkrdps .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kbtynkrdps .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kbtynkrdps .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kbtynkrdps .gt_left {
  text-align: left;
}

#kbtynkrdps .gt_center {
  text-align: center;
}

#kbtynkrdps .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kbtynkrdps .gt_font_normal {
  font-weight: normal;
}

#kbtynkrdps .gt_font_bold {
  font-weight: bold;
}

#kbtynkrdps .gt_font_italic {
  font-style: italic;
}

#kbtynkrdps .gt_super {
  font-size: 65%;
}

#kbtynkrdps .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kbtynkrdps .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kbtynkrdps .gt_indent_1 {
  text-indent: 5px;
}

#kbtynkrdps .gt_indent_2 {
  text-indent: 10px;
}

#kbtynkrdps .gt_indent_3 {
  text-indent: 15px;
}

#kbtynkrdps .gt_indent_4 {
  text-indent: 20px;
}

#kbtynkrdps .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">58427.559</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(1251.135)</td></tr>
    <tr><td headers="" class="gt_row gt_left">age_std</td>
<td headers="(1)" class="gt_row gt_center">3691.355</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(933.966)</td></tr>
    <tr><td headers="" class="gt_row gt_left">I(age_std^2)</td>
<td headers="(1)" class="gt_row gt_center">-8711.331</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(901.848)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The <span class="math inline">\(\beta_0\)</span> coefficient is the same as before because <code>age_std</code> is also centered around zero.</p>
<p>The standard deviation of <code>age</code> is 18.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">sd</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.06088</code></pre>
</div>
</div>
<p>The other coefficients are a little bit harder to interpret because they work in tandem. The following graph shows the change in expected income that comes from a 1 unit increase in <code>age_std</code>:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age_std =</span> (<span class="dv">18</span><span class="sc">:</span><span class="dv">80</span> <span class="sc">-</span> <span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb25-2"><a href="#cb25-2"></a></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="fu">augment</span>(m4, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_std, .fitted)) <span class="sc">+</span> </span>
<span id="cb25-5"><a href="#cb25-5"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb25-6"><a href="#cb25-6"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>  <span class="fu">geom_segment</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">58428</span>, <span class="at">yend =</span> <span class="dv">58428</span> <span class="sc">+</span> <span class="dv">3691</span> <span class="sc">-</span> <span class="dv">8711</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Perhaps some simple high school math can help</p>
<p><span class="math display">\[
\Delta y = \Delta x (3691.355 − 8711.331 \cdot  x)
\]</span></p>
<p>When age changes by 1 unit ( <span class="math inline">\(\Delta x = 1\)</span> ), starting at 0 ( <span class="math inline">\(x = 0\)</span> ) the corresponding effect is <span class="math inline">\(-5019.976\)</span>, which is the slope of the red line in the previous graph.</p>
</section>
<section id="exercise-6" class="level2" data-number="24.7">
<h2 data-number="24.7" class="anchored" data-anchor-id="exercise-6"><span class="header-section-number">24.7</span> Exercise</h2>
<p><strong>Comparisons and Regression</strong></p>
<p>Simple averages and comparisons can be be interpreted as special cases of linear regression.</p>
<p>Take the comparison of <code>coninc</code> among married and unmarried individuals.</p>
<p>I’ve included some code to make your life easier.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>d2 <span class="ot">&lt;-</span> gss18 <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">select</span>(marital, coninc, sex) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-4"><a href="#cb26-4"></a>    <span class="at">coninc =</span> haven<span class="sc">::</span><span class="fu">zap_label</span>(coninc),</span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="at">sex =</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(sex),</span>
<span id="cb26-6"><a href="#cb26-6"></a>    <span class="at">marital =</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(marital)</span>
<span id="cb26-7"><a href="#cb26-7"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-9"><a href="#cb26-9"></a>  <span class="fu">mutate</span>(<span class="at">married =</span> <span class="fu">if_else</span>(marital <span class="sc">==</span> <span class="st">"married"</span>, 1L, 0L)) <span class="sc">|&gt;</span> </span>
<span id="cb26-10"><a href="#cb26-10"></a>  <span class="fu">mutate</span>(<span class="at">male =</span> <span class="fu">if_else</span>(sex <span class="sc">==</span> <span class="st">"male"</span>, 1L, 0L))</span>
<span id="cb26-11"><a href="#cb26-11"></a></span>
<span id="cb26-12"><a href="#cb26-12"></a>d2 <span class="sc">|&gt;</span> </span>
<span id="cb26-13"><a href="#cb26-13"></a>  <span class="fu">group_by</span>(married) <span class="sc">|&gt;</span> </span>
<span id="cb26-14"><a href="#cb26-14"></a>  <span class="fu">summarize</span>(</span>
<span id="cb26-15"><a href="#cb26-15"></a>    <span class="at">avg_coninc =</span> <span class="fu">mean</span>(coninc), </span>
<span id="cb26-16"><a href="#cb26-16"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(coninc),</span>
<span id="cb26-17"><a href="#cb26-17"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb26-18"><a href="#cb26-18"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb26-19"><a href="#cb26-19"></a>  <span class="fu">mutate</span>(<span class="at">std_error =</span> sd <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  married avg_coninc     sd     n std_error
    &lt;int&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;     &lt;dbl&gt;
1       0     36818. 34643.  1229    24496.
2       1     67492. 45378.   923    32087.</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Fit a regression model that predicts <code>coninc</code> from <code>married</code>.</p>
<p><span class="math display">\[
\begin{align}
\text{coninc}_i &amp;\sim \text{Normal}(\mu_i, \sigma_i) \\
\mu_i &amp;= \beta_0 + \beta_1 \text{married}_i
\end{align}
\]</span></p>
<p>Compare the results to the previous <code>dplyr</code> table. What do you notice?</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>m5 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> married, <span class="at">data =</span> d2)</span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="fu">modelsummary</span>(m5, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="yjoswvghqa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#yjoswvghqa table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#yjoswvghqa thead, #yjoswvghqa tbody, #yjoswvghqa tfoot, #yjoswvghqa tr, #yjoswvghqa td, #yjoswvghqa th {
  border-style: none;
}

#yjoswvghqa p {
  margin: 0;
  padding: 0;
}

#yjoswvghqa .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yjoswvghqa .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#yjoswvghqa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yjoswvghqa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yjoswvghqa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yjoswvghqa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yjoswvghqa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yjoswvghqa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yjoswvghqa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yjoswvghqa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yjoswvghqa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yjoswvghqa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yjoswvghqa .gt_spanner_row {
  border-bottom-style: hidden;
}

#yjoswvghqa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#yjoswvghqa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yjoswvghqa .gt_from_md > :first-child {
  margin-top: 0;
}

#yjoswvghqa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yjoswvghqa .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yjoswvghqa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#yjoswvghqa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#yjoswvghqa .gt_row_group_first td {
  border-top-width: 2px;
}

#yjoswvghqa .gt_row_group_first th {
  border-top-width: 2px;
}

#yjoswvghqa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yjoswvghqa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#yjoswvghqa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#yjoswvghqa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yjoswvghqa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yjoswvghqa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yjoswvghqa .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#yjoswvghqa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yjoswvghqa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yjoswvghqa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yjoswvghqa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yjoswvghqa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yjoswvghqa .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#yjoswvghqa .gt_left {
  text-align: left;
}

#yjoswvghqa .gt_center {
  text-align: center;
}

#yjoswvghqa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yjoswvghqa .gt_font_normal {
  font-weight: normal;
}

#yjoswvghqa .gt_font_bold {
  font-weight: bold;
}

#yjoswvghqa .gt_font_italic {
  font-style: italic;
}

#yjoswvghqa .gt_super {
  font-size: 65%;
}

#yjoswvghqa .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#yjoswvghqa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#yjoswvghqa .gt_indent_1 {
  text-indent: 5px;
}

#yjoswvghqa .gt_indent_2 {
  text-indent: 10px;
}

#yjoswvghqa .gt_indent_3 {
  text-indent: 15px;
}

#yjoswvghqa .gt_indent_4 {
  text-indent: 20px;
}

#yjoswvghqa .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">36817.678</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(1129.716)</td></tr>
    <tr><td headers="" class="gt_row gt_left">married</td>
<td headers="(1)" class="gt_row gt_center">30674.237</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(1725.002)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The <span class="math inline">\(\beta_0\)</span> coefficient is the value of <code>avg_inc</code> in the first row.</p>
<p>The <span class="math inline">\(\beta_1\)</span> coefficient is the the difference between both values of <code>avg_inc</code> in the table—i.e., it is the difference in average <em>family income</em> between married and unmarried people.</p>
<p><strong>Standard Errors</strong></p>
<p>The formula for the standard error for a comparison of means is given by:</p>
<p><span class="math display">\[
\text{se}(\overline x_1 - \overline x_2) = \sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}
\]</span></p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Calculate the standard error by plugging in the corresponding values in the <code>dplyr</code> table. Compare this value to the standard error corresponding to the <code>married</code> coefficient. Do they look similar?</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">sqrt</span>((<span class="fl">34642.61</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">1229</span>) <span class="sc">+</span> (<span class="fl">45378.47</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">923</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1790.945</code></pre>
</div>
</div>
<p>Yes, they look similar. I am actually a little annoyed because I was expecting them to be the same… I guess there’s still some gaps in my knowledge 😳</p>
</section>
<section id="exercise-7" class="level2" data-number="24.8">
<h2 data-number="24.8" class="anchored" data-anchor-id="exercise-7"><span class="header-section-number">24.8</span> Exercise</h2>
<p><strong>Binary Interactions</strong></p>
<p>Just as we did with logistic regression, we can use interactions to reconstruct a <span class="math inline">\(2\times 2\)</span> table. The difference is that the cells contain averages instead of counts.</p>
<p>For example:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>d2 <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">group_by</span>(male, married) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">summarize</span>(<span class="at">coninc =</span> <span class="fu">mean</span>(coninc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'male'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   male [2]
   male married coninc
  &lt;int&gt;   &lt;int&gt;  &lt;dbl&gt;
1     0       0 33561.
2     0       1 66760.
3     1       0 41015.
4     1       1 68292.</code></pre>
</div>
</div>
<p>Fit a normal linear regression that predicts <code>coninc</code> from <code>sex</code> and <code>married</code>.</p>
<p><span class="math display">\[
\begin{align}
\text{coninc}_i &amp;\sim \text{Normal}(\mu_i, \sigma_i) \\
\mu_i &amp;= \beta_0 + \beta_1 \text{male}_i + \beta_2 \text{married}_i + \beta_3 \text{male}_i \times \text{married}_i
\end{align}
\]</span></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>m6 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> male<span class="sc">*</span>married, <span class="at">data =</span> d2) </span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="fu">modelsummary</span>(m6, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="jsinmytwql" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jsinmytwql table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jsinmytwql thead, #jsinmytwql tbody, #jsinmytwql tfoot, #jsinmytwql tr, #jsinmytwql td, #jsinmytwql th {
  border-style: none;
}

#jsinmytwql p {
  margin: 0;
  padding: 0;
}

#jsinmytwql .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jsinmytwql .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jsinmytwql .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jsinmytwql .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jsinmytwql .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jsinmytwql .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jsinmytwql .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jsinmytwql .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jsinmytwql .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jsinmytwql .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jsinmytwql .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jsinmytwql .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jsinmytwql .gt_spanner_row {
  border-bottom-style: hidden;
}

#jsinmytwql .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jsinmytwql .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jsinmytwql .gt_from_md > :first-child {
  margin-top: 0;
}

#jsinmytwql .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jsinmytwql .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jsinmytwql .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jsinmytwql .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jsinmytwql .gt_row_group_first td {
  border-top-width: 2px;
}

#jsinmytwql .gt_row_group_first th {
  border-top-width: 2px;
}

#jsinmytwql .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jsinmytwql .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jsinmytwql .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jsinmytwql .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jsinmytwql .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jsinmytwql .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jsinmytwql .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jsinmytwql .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jsinmytwql .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jsinmytwql .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jsinmytwql .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jsinmytwql .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jsinmytwql .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jsinmytwql .gt_left {
  text-align: left;
}

#jsinmytwql .gt_center {
  text-align: center;
}

#jsinmytwql .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jsinmytwql .gt_font_normal {
  font-weight: normal;
}

#jsinmytwql .gt_font_bold {
  font-weight: bold;
}

#jsinmytwql .gt_font_italic {
  font-style: italic;
}

#jsinmytwql .gt_super {
  font-size: 65%;
}

#jsinmytwql .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jsinmytwql .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jsinmytwql .gt_indent_1 {
  text-indent: 5px;
}

#jsinmytwql .gt_indent_2 {
  text-indent: 10px;
}

#jsinmytwql .gt_indent_3 {
  text-indent: 15px;
}

#jsinmytwql .gt_indent_4 {
  text-indent: 20px;
}

#jsinmytwql .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">33560.775</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(1502.363)</td></tr>
    <tr><td headers="" class="gt_row gt_left">male</td>
<td headers="(1)" class="gt_row gt_center">7453.880</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(2272.813)</td></tr>
    <tr><td headers="" class="gt_row gt_left">married</td>
<td headers="(1)" class="gt_row gt_center">33198.981</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(2344.690)</td></tr>
    <tr><td headers="" class="gt_row gt_left">male × married</td>
<td headers="(1)" class="gt_row gt_center">-5921.494</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(3456.574)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Fill in the following empty spaces with corresponding coefficient values:</p>
<table class="table">
<thead>
<tr class="header">
<th>male</th>
<th>married</th>
<th>coninc</th>
<th>regression output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>33560.78</td>
<td><span class="math inline">\(\beta_0\)</span></td>
</tr>
<tr class="even">
<td>0</td>
<td>1</td>
<td>66759.76</td>
<td><span class="math inline">\(\beta_0 + \beta_2\)</span></td>
</tr>
<tr class="odd">
<td>1</td>
<td>0</td>
<td>41014.66</td>
<td><span class="math inline">\(\beta_0 + \beta_1\)</span></td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>68292.14</td>
<td><span class="math inline">\(\beta_0 + \beta_1 + \beta_2 + \beta_3\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="exercise-8" class="level2" data-number="24.9">
<h2 data-number="24.9" class="anchored" data-anchor-id="exercise-8"><span class="header-section-number">24.9</span> Exercise</h2>
<p>For this exercise I am going to ask you to import the <code>bikes</code> dataset from the <code>bayesrules</code> package. You will probably need to install this package first.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">data</span>(bikes, <span class="at">package =</span> <span class="st">"bayesrules"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>You will have to fit a normal linear regression that predicts the number of bikeshare rides using <code>windspeed</code>, <code>weekend</code>, and <code>temp_feel</code> as predictors.</p>
<p>Before doing that, make sure you center <code>windspeed</code> and <code>temp_feel</code> around their mean values.</p>
<p>If the temperature and the wind speed are average, what is the expected ridership for a weekend day? What is the expected ridership for a weekday? Show the code that gets you your answers.</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>bikes <span class="ot">&lt;-</span> bikes <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">mutate</span>(<span class="at">windspeed =</span> windspeed <span class="sc">-</span> <span class="fu">mean</span>(windspeed)) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3"></a>  <span class="fu">mutate</span>(<span class="at">temp_feel =</span> temp_feel <span class="sc">-</span> <span class="fu">mean</span>(temp_feel))</span>
<span id="cb36-4"><a href="#cb36-4"></a></span>
<span id="cb36-5"><a href="#cb36-5"></a>m7 <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes)</span>
<span id="cb36-6"><a href="#cb36-6"></a><span class="fu">modelsummary</span>(m7, <span class="at">gof_map =</span> <span class="st">"nobs"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb36-7"><a href="#cb36-7"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="arcjjnarpc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#arcjjnarpc table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#arcjjnarpc thead, #arcjjnarpc tbody, #arcjjnarpc tfoot, #arcjjnarpc tr, #arcjjnarpc td, #arcjjnarpc th {
  border-style: none;
}

#arcjjnarpc p {
  margin: 0;
  padding: 0;
}

#arcjjnarpc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#arcjjnarpc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#arcjjnarpc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#arcjjnarpc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#arcjjnarpc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#arcjjnarpc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arcjjnarpc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#arcjjnarpc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#arcjjnarpc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#arcjjnarpc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#arcjjnarpc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#arcjjnarpc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#arcjjnarpc .gt_spanner_row {
  border-bottom-style: hidden;
}

#arcjjnarpc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#arcjjnarpc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#arcjjnarpc .gt_from_md > :first-child {
  margin-top: 0;
}

#arcjjnarpc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#arcjjnarpc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#arcjjnarpc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#arcjjnarpc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#arcjjnarpc .gt_row_group_first td {
  border-top-width: 2px;
}

#arcjjnarpc .gt_row_group_first th {
  border-top-width: 2px;
}

#arcjjnarpc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#arcjjnarpc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#arcjjnarpc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#arcjjnarpc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arcjjnarpc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#arcjjnarpc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#arcjjnarpc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#arcjjnarpc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#arcjjnarpc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#arcjjnarpc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#arcjjnarpc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#arcjjnarpc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#arcjjnarpc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#arcjjnarpc .gt_left {
  text-align: left;
}

#arcjjnarpc .gt_center {
  text-align: center;
}

#arcjjnarpc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#arcjjnarpc .gt_font_normal {
  font-weight: normal;
}

#arcjjnarpc .gt_font_bold {
  font-weight: bold;
}

#arcjjnarpc .gt_font_italic {
  font-style: italic;
}

#arcjjnarpc .gt_super {
  font-size: 65%;
}

#arcjjnarpc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#arcjjnarpc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#arcjjnarpc .gt_indent_1 {
  text-indent: 5px;
}

#arcjjnarpc .gt_indent_2 {
  text-indent: 10px;
}

#arcjjnarpc .gt_indent_3 {
  text-indent: 15px;
}

#arcjjnarpc .gt_indent_4 {
  text-indent: 20px;
}

#arcjjnarpc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">3683.442</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(64.967)</td></tr>
    <tr><td headers="" class="gt_row gt_left">windspeed</td>
<td headers="(1)" class="gt_row gt_center">-32.821</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(10.072)</td></tr>
    <tr><td headers="" class="gt_row gt_left">temp_feel</td>
<td headers="(1)" class="gt_row gt_center">77.966</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(4.978)</td></tr>
    <tr><td headers="" class="gt_row gt_left">weekendTRUE</td>
<td headers="(1)" class="gt_row gt_center">-713.575</td></tr>
    <tr><td headers="" class="gt_row gt_left" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;"></td>
<td headers="(1)" class="gt_row gt_center" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;">(122.478)</td></tr>
    <tr><td headers="" class="gt_row gt_left">Num.Obs.</td>
<td headers="(1)" class="gt_row gt_center">500</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<ul>
<li>If the temperature and the wind speed are average, the expected ridership for a weekend day is:</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">coefficients</span>(m7)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) weekendTRUE 
   3683.442    -713.575 </code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">sum</span>(<span class="fu">coefficients</span>(m7)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2969.867</code></pre>
</div>
</div>
<p><em>Note. I can get away with this because the other variables are centered.</em></p>
<ul>
<li>What is the expected ridership for a weekday?</li>
</ul>
<p>That’s just given by the intercept. It’s 3683.442 rides (in average).</p>
</section>
<section id="exercise-9" class="level2" data-number="24.10">
<h2 data-number="24.10" class="anchored" data-anchor-id="exercise-9"><span class="header-section-number">24.10</span> Exercise</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Repeat the exercise above, but fit a Poisson model instead.</p>
<p>If the temperature and the wind speed are average, what is the expected ridership for a weekend day? What is the expected ridership for a weekday? Show the code that gets you your answers.</p>
</div>
</div>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>m8 <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes, <span class="at">family =</span> <span class="st">"poisson"</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">modelsummary</span>(m8, <span class="at">gof_map =</span> <span class="st">"nobs"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="jibiohrdog" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jibiohrdog table {
  font-family: Optima, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jibiohrdog thead, #jibiohrdog tbody, #jibiohrdog tfoot, #jibiohrdog tr, #jibiohrdog td, #jibiohrdog th {
  border-style: none;
}

#jibiohrdog p {
  margin: 0;
  padding: 0;
}

#jibiohrdog .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jibiohrdog .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jibiohrdog .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jibiohrdog .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jibiohrdog .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jibiohrdog .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jibiohrdog .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jibiohrdog .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jibiohrdog .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jibiohrdog .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jibiohrdog .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jibiohrdog .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jibiohrdog .gt_spanner_row {
  border-bottom-style: hidden;
}

#jibiohrdog .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jibiohrdog .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jibiohrdog .gt_from_md > :first-child {
  margin-top: 0;
}

#jibiohrdog .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jibiohrdog .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jibiohrdog .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jibiohrdog .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jibiohrdog .gt_row_group_first td {
  border-top-width: 2px;
}

#jibiohrdog .gt_row_group_first th {
  border-top-width: 2px;
}

#jibiohrdog .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jibiohrdog .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jibiohrdog .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jibiohrdog .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jibiohrdog .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jibiohrdog .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jibiohrdog .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jibiohrdog .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jibiohrdog .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jibiohrdog .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jibiohrdog .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jibiohrdog .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jibiohrdog .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jibiohrdog .gt_left {
  text-align: left;
}

#jibiohrdog .gt_center {
  text-align: center;
}

#jibiohrdog .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jibiohrdog .gt_font_normal {
  font-weight: normal;
}

#jibiohrdog .gt_font_bold {
  font-weight: bold;
}

#jibiohrdog .gt_font_italic {
  font-style: italic;
}

#jibiohrdog .gt_super {
  font-size: 65%;
}

#jibiohrdog .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jibiohrdog .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jibiohrdog .gt_indent_1 {
  text-indent: 5px;
}

#jibiohrdog .gt_indent_2 {
  text-indent: 10px;
}

#jibiohrdog .gt_indent_3 {
  text-indent: 15px;
}

#jibiohrdog .gt_indent_4 {
  text-indent: 20px;
}

#jibiohrdog .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=" "> </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="(1)">(1)</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="" class="gt_row gt_left">(Intercept)</td>
<td headers="(1)" class="gt_row gt_center">8.175</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(0.001)</td></tr>
    <tr><td headers="" class="gt_row gt_left">windspeed</td>
<td headers="(1)" class="gt_row gt_center">-0.010</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(0.000)</td></tr>
    <tr><td headers="" class="gt_row gt_left">temp_feel</td>
<td headers="(1)" class="gt_row gt_center">0.023</td></tr>
    <tr><td headers="" class="gt_row gt_left"></td>
<td headers="(1)" class="gt_row gt_center">(0.000)</td></tr>
    <tr><td headers="" class="gt_row gt_left">weekendTRUE</td>
<td headers="(1)" class="gt_row gt_center">-0.217</td></tr>
    <tr><td headers="" class="gt_row gt_left" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;"></td>
<td headers="(1)" class="gt_row gt_center" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #000000;">(0.002)</td></tr>
    <tr><td headers="" class="gt_row gt_left">Num.Obs.</td>
<td headers="(1)" class="gt_row gt_center">500</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<ul>
<li>If the temperature and the wind speed are average, the expected ridership for a weekend day is:</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">coefficients</span>(m8)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) weekendTRUE 
  8.1745445  -0.2167221 </code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="fu">exp</span>(<span class="fu">sum</span>(<span class="fu">coefficients</span>(m8)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2857.843</code></pre>
</div>
</div>
<ul>
<li>That’s just given by the intercept.</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">exp</span>(<span class="fu">coefficients</span>(m8)[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3549.438</code></pre>
</div>
</div>
</section>
<section id="exercise-10" class="level2" data-number="24.11">
<h2 data-number="24.11" class="anchored" data-anchor-id="exercise-10"><span class="header-section-number">24.11</span> Exercise</h2>
<p>In order to assess goodness of fit, it is sometimes useful to plot the residuals against some predictor.</p>
<p><span class="math display">\[
\varepsilon_i = y_i - \hat y_i
\]</span></p>
<p>If the model fits well, we should expect to see the residuals to be normally distributed around zero.</p>
<p>For example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>mod_normal <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb48-2"><a href="#cb48-2"></a>bikes<span class="sc">$</span>resid <span class="ot">&lt;-</span> <span class="fu">residuals</span>(mod_normal)</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a>bikes <span class="sc">|&gt;</span> </span>
<span id="cb48-5"><a href="#cb48-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, resid)) <span class="sc">+</span> </span>
<span id="cb48-6"><a href="#cb48-6"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span> </span>
<span id="cb48-8"><a href="#cb48-8"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb48-9"><a href="#cb48-9"></a>    <span class="at">data =</span> <span class="fu">filter</span>(bikes, <span class="fu">abs</span>(resid) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">abs</span>(resid))),</span>
<span id="cb48-10"><a href="#cb48-10"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb48-11"><a href="#cb48-11"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="solutions-12_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>What can you tell me about the model fit? Why do you think the model fits poorly?</p>
<p>Use <code>dplyr</code> to figure out the date of the observation with the largest residual (shown circled in red). Why is the model so poor at predicting the number of bikeshare rides this day?</p>
</div>
</div>
</div>
<p>The model fits poorly because the number of rides seems to have been increasing steadily over the course of three years. There’s probably also some seasonality in the data (although it is not easy to spot in the graph).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">filter</span>(bikes, <span class="fu">abs</span>(resid) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">abs</span>(resid))) <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">pull</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2012-10-29"</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/hurricane.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption class="figure-caption">The answer</figcaption>
</figure>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./solutions-11.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Solutions 11</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">References</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb51" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb51-1"><a href="#cb51-1"></a><span class="co">---</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="an">title:</span><span class="co"> "Solutions 12"</span></span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="an">callout-icon:</span><span class="co"> false</span></span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="an">callout-appearance:</span><span class="co"> simple</span></span>
<span id="cb51-5"><a href="#cb51-5"></a><span class="an">code-fold:</span><span class="co"> show</span></span>
<span id="cb51-6"><a href="#cb51-6"></a><span class="co">---</span></span>
<span id="cb51-7"><a href="#cb51-7"></a></span>
<span id="cb51-10"><a href="#cb51-10"></a><span class="in">```{r}</span></span>
<span id="cb51-11"><a href="#cb51-11"></a><span class="co">#| message: false</span></span>
<span id="cb51-12"><a href="#cb51-12"></a><span class="co">#| label: "Set up"</span></span>
<span id="cb51-13"><a href="#cb51-13"></a></span>
<span id="cb51-14"><a href="#cb51-14"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb51-15"><a href="#cb51-15"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>(<span class="at">base_family =</span> <span class="st">"Optima"</span>))</span>
<span id="cb51-16"><a href="#cb51-16"></a></span>
<span id="cb51-17"><a href="#cb51-17"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb51-18"><a href="#cb51-18"></a><span class="fu">library</span>(broom)</span>
<span id="cb51-19"><a href="#cb51-19"></a><span class="fu">library</span>(gt)</span>
<span id="cb51-20"><a href="#cb51-20"></a><span class="fu">library</span>(performance)</span>
<span id="cb51-21"><a href="#cb51-21"></a></span>
<span id="cb51-22"><a href="#cb51-22"></a><span class="fu">library</span>(gssr)</span>
<span id="cb51-23"><a href="#cb51-23"></a>gss18 <span class="ot">&lt;-</span> <span class="fu">gss_get_yr</span>(<span class="dv">2018</span>) </span>
<span id="cb51-24"><a href="#cb51-24"></a></span>
<span id="cb51-25"><a href="#cb51-25"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb51-26"><a href="#cb51-26"></a>  <span class="st">"coninc"</span>, <span class="st">"height"</span>, <span class="st">"hompop"</span>, <span class="st">"sibs"</span>, <span class="st">"numwomen"</span>, <span class="st">"nummen"</span>, <span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"race"</span>, <span class="st">"attend"</span>, <span class="st">"polviews"</span>, <span class="st">"degree"</span>,</span>
<span id="cb51-27"><a href="#cb51-27"></a>  <span class="st">"happy"</span>, <span class="st">"sexornt"</span>, <span class="st">"premarsx"</span>, <span class="st">"condom"</span>, <span class="st">"wrkslf"</span>, <span class="st">"fefam"</span>, <span class="st">"cappun"</span>, <span class="st">"padeg"</span>, <span class="st">"madeg"</span></span>
<span id="cb51-28"><a href="#cb51-28"></a>)</span>
<span id="cb51-29"><a href="#cb51-29"></a></span>
<span id="cb51-30"><a href="#cb51-30"></a>d <span class="ot">&lt;-</span> gss18 <span class="sc">|&gt;</span> </span>
<span id="cb51-31"><a href="#cb51-31"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(vars)) <span class="sc">|&gt;</span> </span>
<span id="cb51-32"><a href="#cb51-32"></a>  haven<span class="sc">::</span><span class="fu">zap_missing</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-33"><a href="#cb51-33"></a>  <span class="do">## continuous vars </span></span>
<span id="cb51-34"><a href="#cb51-34"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(vars[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]), haven<span class="sc">::</span>zap_labels)) <span class="sc">|&gt;</span> </span>
<span id="cb51-35"><a href="#cb51-35"></a>  <span class="do">## categorical vars</span></span>
<span id="cb51-36"><a href="#cb51-36"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">!</span><span class="fu">all_of</span>(vars[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]), haven<span class="sc">::</span>as_factor)) <span class="sc">|&gt;</span></span>
<span id="cb51-37"><a href="#cb51-37"></a>  <span class="fu">mutate</span>(<span class="at">numtot =</span> numwomen <span class="sc">+</span> nummen)</span>
<span id="cb51-38"><a href="#cb51-38"></a><span class="in">```</span></span>
<span id="cb51-39"><a href="#cb51-39"></a></span>
<span id="cb51-40"><a href="#cb51-40"></a><span class="fu">## Exercise</span></span>
<span id="cb51-41"><a href="#cb51-41"></a></span>
<span id="cb51-42"><a href="#cb51-42"></a>**Some intuition behind the math**</span>
<span id="cb51-43"><a href="#cb51-43"></a></span>
<span id="cb51-44"><a href="#cb51-44"></a>The formula for the normal distribution is awkward, but it's a good idea to spend some time figuring out why it looks like that.</span>
<span id="cb51-45"><a href="#cb51-45"></a></span>
<span id="cb51-46"><a href="#cb51-46"></a>Plot the following functions in R:</span>
<span id="cb51-47"><a href="#cb51-47"></a></span>
<span id="cb51-48"><a href="#cb51-48"></a><span class="ss">-   </span>$f(x) = (x - \mu)^2$</span>
<span id="cb51-49"><a href="#cb51-49"></a></span>
<span id="cb51-52"><a href="#cb51-52"></a><span class="in">```{r}</span></span>
<span id="cb51-53"><a href="#cb51-53"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb51-54"><a href="#cb51-54"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb51-55"><a href="#cb51-55"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb51-56"><a href="#cb51-56"></a><span class="in">```</span></span>
<span id="cb51-57"><a href="#cb51-57"></a></span>
<span id="cb51-58"><a href="#cb51-58"></a><span class="ss">-   </span>$f(x) = -(x - \mu)^2$</span>
<span id="cb51-59"><a href="#cb51-59"></a></span>
<span id="cb51-62"><a href="#cb51-62"></a><span class="in">```{r}</span></span>
<span id="cb51-63"><a href="#cb51-63"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb51-64"><a href="#cb51-64"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb51-65"><a href="#cb51-65"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) <span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb51-66"><a href="#cb51-66"></a><span class="in">```</span></span>
<span id="cb51-67"><a href="#cb51-67"></a></span>
<span id="cb51-68"><a href="#cb51-68"></a><span class="ss">-   </span>$f(x) = e^{-(x - \mu)^2}$</span>
<span id="cb51-69"><a href="#cb51-69"></a></span>
<span id="cb51-72"><a href="#cb51-72"></a><span class="in">```{r}</span></span>
<span id="cb51-73"><a href="#cb51-73"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb51-74"><a href="#cb51-74"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb51-75"><a href="#cb51-75"></a>  <span class="fu">geom_function</span>(<span class="at">fun =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb51-76"><a href="#cb51-76"></a><span class="in">```</span></span>
<span id="cb51-77"><a href="#cb51-77"></a></span>
<span id="cb51-78"><a href="#cb51-78"></a><span class="fu">## Exercise</span></span>
<span id="cb51-79"><a href="#cb51-79"></a></span>
<span id="cb51-80"><a href="#cb51-80"></a>The function $f(x) = e^{-x^2}$ already looks a lot like the normal distribution, but we're not quite there yet. It is *not* a probability distribution because the *area under the curve* is larger than 1; probabilities can only add up to 1!</span>
<span id="cb51-81"><a href="#cb51-81"></a></span>
<span id="cb51-82"><a href="#cb51-82"></a>Using some <span class="co">[</span><span class="ot">integral calculus</span><span class="co">](https://www.integral-calculator.com/#expr=e%5E-x%5E2&amp;lbound=minf&amp;ubound=inf)</span>, we can tell that this area adds up to approximately 1.77.</span>
<span id="cb51-83"><a href="#cb51-83"></a></span>
<span id="cb51-86"><a href="#cb51-86"></a><span class="in">```{r}</span></span>
<span id="cb51-87"><a href="#cb51-87"></a><span class="fu">integrate</span>(<span class="at">f =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>), <span class="at">lower =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">upper =</span> <span class="cn">Inf</span>)</span>
<span id="cb51-88"><a href="#cb51-88"></a><span class="in">```</span></span>
<span id="cb51-89"><a href="#cb51-89"></a></span>
<span id="cb51-90"><a href="#cb51-90"></a>Answer these two questions:</span>
<span id="cb51-91"><a href="#cb51-91"></a></span>
<span id="cb51-92"><a href="#cb51-92"></a><span class="ss">-   </span>What is the squared root of $\pi$ ?</span>
<span id="cb51-93"><a href="#cb51-93"></a></span>
<span id="cb51-96"><a href="#cb51-96"></a><span class="in">```{r}</span></span>
<span id="cb51-97"><a href="#cb51-97"></a><span class="fu">sqrt</span>(pi)</span>
<span id="cb51-98"><a href="#cb51-98"></a><span class="in">```</span></span>
<span id="cb51-99"><a href="#cb51-99"></a></span>
<span id="cb51-100"><a href="#cb51-100"></a><span class="ss">-   </span>What is the area under the curve for this function?</span>
<span id="cb51-101"><a href="#cb51-101"></a></span>
<span id="cb51-102"><a href="#cb51-102"></a>    $$</span>
<span id="cb51-103"><a href="#cb51-103"></a>    f(x) = \frac{1}{\sqrt{\pi}} e^{-x^2}</span>
<span id="cb51-104"><a href="#cb51-104"></a>    $$</span>
<span id="cb51-105"><a href="#cb51-105"></a></span>
<span id="cb51-108"><a href="#cb51-108"></a><span class="in">```{r}</span></span>
<span id="cb51-109"><a href="#cb51-109"></a><span class="fu">integrate</span>(<span class="at">f =</span> \(x) <span class="fu">exp</span>(<span class="sc">-</span>x<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">sqrt</span>(pi), <span class="at">lower =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">upper =</span> <span class="cn">Inf</span>)</span>
<span id="cb51-110"><a href="#cb51-110"></a><span class="in">```</span></span>
<span id="cb51-111"><a href="#cb51-111"></a></span>
<span id="cb51-112"><a href="#cb51-112"></a><span class="fu">## Exercise</span></span>
<span id="cb51-113"><a href="#cb51-113"></a></span>
<span id="cb51-114"><a href="#cb51-114"></a>::: callout-note</span>
<span id="cb51-115"><a href="#cb51-115"></a>Go to the GSS data for 2018 and use a normal linear regression to estimate <span class="in">`height`</span> from <span class="in">`male`</span> (an indicator variable equals 1 when <span class="in">`sex == "male"`</span>).</span>
<span id="cb51-116"><a href="#cb51-116"></a></span>
<span id="cb51-117"><a href="#cb51-117"></a>Interpret the intercept and the slope coefficients ( $\alpha$ and $\beta$ ).</span>
<span id="cb51-118"><a href="#cb51-118"></a></span>
<span id="cb51-119"><a href="#cb51-119"></a>After doing this add <span class="in">`age`</span> as a second predictor.</span>
<span id="cb51-120"><a href="#cb51-120"></a></span>
<span id="cb51-121"><a href="#cb51-121"></a>Interpret the intercept and the slope coefficients ( $\alpha$, $\beta_1$, and $\beta_2$ ).</span>
<span id="cb51-122"><a href="#cb51-122"></a>:::</span>
<span id="cb51-123"><a href="#cb51-123"></a></span>
<span id="cb51-126"><a href="#cb51-126"></a><span class="in">```{r}</span></span>
<span id="cb51-127"><a href="#cb51-127"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb51-128"><a href="#cb51-128"></a>  <span class="fu">mutate</span>(<span class="at">male =</span> <span class="fu">as.integer</span>(sex <span class="sc">==</span> <span class="st">"male"</span>)) </span>
<span id="cb51-129"><a href="#cb51-129"></a>  </span>
<span id="cb51-130"><a href="#cb51-130"></a>ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(height <span class="sc">~</span> male, <span class="at">data =</span> d)</span>
<span id="cb51-131"><a href="#cb51-131"></a>ols2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(height <span class="sc">~</span> male <span class="sc">+</span> age, <span class="at">data =</span> d)</span>
<span id="cb51-132"><a href="#cb51-132"></a></span>
<span id="cb51-133"><a href="#cb51-133"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(ols, ols2), <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-134"><a href="#cb51-134"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-135"><a href="#cb51-135"></a><span class="in">```</span></span>
<span id="cb51-136"><a href="#cb51-136"></a></span>
<span id="cb51-137"><a href="#cb51-137"></a>*Model 1.*</span>
<span id="cb51-138"><a href="#cb51-138"></a></span>
<span id="cb51-139"><a href="#cb51-139"></a>The $\alpha$ indicates the average height for women. The $\beta$ indicates the associated increase in height for men (compared to women)---i.e., men are (on average) 5.7 (inches?) taller than women.</span>
<span id="cb51-140"><a href="#cb51-140"></a></span>
<span id="cb51-141"><a href="#cb51-141"></a>*Model 2.*</span>
<span id="cb51-142"><a href="#cb51-142"></a></span>
<span id="cb51-143"><a href="#cb51-143"></a>The $\alpha$ indicates the average height for women that are *age zero*. The $\beta_\text{male}$ indicates the associated increase in height for men (compared to women)---i.e., men are (on average) 5.7 (inches?) taller than women. The $\beta_\text{age}$ is too noisy ("not statistically significant") and is negative. This means that for every additional year the respondent is predicted to be 0.001 inches shorter. Does this makes sense? No it does not make sense. People grow up as they age, but the sample doesn't include anyone under the age of 18 (presumably when people have stop growing). Thus, the model doesn't pick up on this and is happy to assume that a newborn woman is 64 inches tall.</span>
<span id="cb51-144"><a href="#cb51-144"></a></span>
<span id="cb51-145"><a href="#cb51-145"></a>I'll show you two ways of visualizing this.</span>
<span id="cb51-146"><a href="#cb51-146"></a></span>
<span id="cb51-147"><a href="#cb51-147"></a><span class="ss">1.  </span>Using the <span class="in">`ggpredict()`</span> function that Steve likes so much.</span>
<span id="cb51-148"><a href="#cb51-148"></a></span>
<span id="cb51-151"><a href="#cb51-151"></a><span class="in">```{r}</span></span>
<span id="cb51-152"><a href="#cb51-152"></a>ggeffects<span class="sc">::</span><span class="fu">ggpredict</span>(ols2, <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"male"</span>)) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb51-153"><a href="#cb51-153"></a><span class="in">```</span></span>
<span id="cb51-154"><a href="#cb51-154"></a></span>
<span id="cb51-155"><a href="#cb51-155"></a><span class="ss">2.  </span>Using <span class="in">`broom::augment()`</span> + <span class="in">`ggplot()`</span></span>
<span id="cb51-156"><a href="#cb51-156"></a></span>
<span id="cb51-159"><a href="#cb51-159"></a><span class="in">```{r}</span></span>
<span id="cb51-160"><a href="#cb51-160"></a><span class="fu">augment</span>(ols2, <span class="at">interval =</span> <span class="st">"confidence"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-161"><a href="#cb51-161"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">if_else</span>(male <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"men"</span>, <span class="st">"women"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb51-162"><a href="#cb51-162"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, .fitted, <span class="at">fill =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span> </span>
<span id="cb51-163"><a href="#cb51-163"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb51-164"><a href="#cb51-164"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>)</span>
<span id="cb51-165"><a href="#cb51-165"></a><span class="in">```</span></span>
<span id="cb51-166"><a href="#cb51-166"></a></span>
<span id="cb51-167"><a href="#cb51-167"></a><span class="fu">## Exercise</span></span>
<span id="cb51-168"><a href="#cb51-168"></a></span>
<span id="cb51-169"><a href="#cb51-169"></a>::: callout-note</span>
<span id="cb51-170"><a href="#cb51-170"></a>**Polynomial Regression**</span>
<span id="cb51-171"><a href="#cb51-171"></a></span>
<span id="cb51-172"><a href="#cb51-172"></a>Using the same GSS data, predict <span class="in">`coninc`</span> (inflation-adjusted family income) from <span class="in">`age`</span> and <span class="in">`age_squared`</span>.</span>
<span id="cb51-173"><a href="#cb51-173"></a></span>
<span id="cb51-174"><a href="#cb51-174"></a>$$</span>
<span id="cb51-175"><a href="#cb51-175"></a>\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i</span>
<span id="cb51-176"><a href="#cb51-176"></a>$$</span>
<span id="cb51-177"><a href="#cb51-177"></a></span>
<span id="cb51-178"><a href="#cb51-178"></a>What does the $\beta_0$ coefficient mean here?</span>
<span id="cb51-179"><a href="#cb51-179"></a></span>
<span id="cb51-180"><a href="#cb51-180"></a>Plot the predictions from this model using a new dataset that contains ages 18 to 85.</span>
<span id="cb51-181"><a href="#cb51-181"></a>:::</span>
<span id="cb51-182"><a href="#cb51-182"></a></span>
<span id="cb51-185"><a href="#cb51-185"></a><span class="in">```{r}</span></span>
<span id="cb51-186"><a href="#cb51-186"></a>m2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age <span class="sc">+</span> <span class="fu">I</span>(age<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb51-187"><a href="#cb51-187"></a><span class="fu">modelsummary</span>(m2, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-188"><a href="#cb51-188"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-189"><a href="#cb51-189"></a><span class="in">```</span></span>
<span id="cb51-190"><a href="#cb51-190"></a></span>
<span id="cb51-191"><a href="#cb51-191"></a>The $\alpha$ is kinda meaningless. It corresponds to the average income of a person of age zero.</span>
<span id="cb51-192"><a href="#cb51-192"></a></span>
<span id="cb51-195"><a href="#cb51-195"></a><span class="in">```{r}</span></span>
<span id="cb51-196"><a href="#cb51-196"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">80</span>)</span>
<span id="cb51-197"><a href="#cb51-197"></a></span>
<span id="cb51-198"><a href="#cb51-198"></a><span class="fu">augment</span>(m2, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb51-199"><a href="#cb51-199"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age, .fitted)) <span class="sc">+</span> </span>
<span id="cb51-200"><a href="#cb51-200"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb51-201"><a href="#cb51-201"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span>
<span id="cb51-202"><a href="#cb51-202"></a><span class="in">```</span></span>
<span id="cb51-203"><a href="#cb51-203"></a></span>
<span id="cb51-204"><a href="#cb51-204"></a><span class="fu">## Exercise</span></span>
<span id="cb51-205"><a href="#cb51-205"></a></span>
<span id="cb51-206"><a href="#cb51-206"></a>**Transformations**</span>
<span id="cb51-207"><a href="#cb51-207"></a></span>
<span id="cb51-208"><a href="#cb51-208"></a>Transform the age variable so that it's centered around the mean.</span>
<span id="cb51-209"><a href="#cb51-209"></a></span>
<span id="cb51-212"><a href="#cb51-212"></a><span class="in">```{r}</span></span>
<span id="cb51-213"><a href="#cb51-213"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb51-214"><a href="#cb51-214"></a>  <span class="fu">mutate</span>(<span class="at">age_centered =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb51-215"><a href="#cb51-215"></a><span class="in">```</span></span>
<span id="cb51-216"><a href="#cb51-216"></a></span>
<span id="cb51-217"><a href="#cb51-217"></a>::: callout-note</span>
<span id="cb51-218"><a href="#cb51-218"></a>Fit the same model you fitted earlier:</span>
<span id="cb51-219"><a href="#cb51-219"></a></span>
<span id="cb51-220"><a href="#cb51-220"></a>$$</span>
<span id="cb51-221"><a href="#cb51-221"></a>\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i</span>
<span id="cb51-222"><a href="#cb51-222"></a>$$</span>
<span id="cb51-223"><a href="#cb51-223"></a></span>
<span id="cb51-224"><a href="#cb51-224"></a>What changed and what remained the same?</span>
<span id="cb51-225"><a href="#cb51-225"></a></span>
<span id="cb51-226"><a href="#cb51-226"></a>What does the $\beta_0$ coefficient mean here?</span>
<span id="cb51-227"><a href="#cb51-227"></a>:::</span>
<span id="cb51-228"><a href="#cb51-228"></a></span>
<span id="cb51-231"><a href="#cb51-231"></a><span class="in">```{r}</span></span>
<span id="cb51-232"><a href="#cb51-232"></a>m3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age_centered <span class="sc">+</span> <span class="fu">I</span>(age_centered<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb51-233"><a href="#cb51-233"></a><span class="fu">modelsummary</span>(m3, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-234"><a href="#cb51-234"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-235"><a href="#cb51-235"></a><span class="in">```</span></span>
<span id="cb51-236"><a href="#cb51-236"></a></span>
<span id="cb51-237"><a href="#cb51-237"></a>The $\beta_0$ coefficient now means the expected income for a person of average age (in the sample).</span>
<span id="cb51-238"><a href="#cb51-238"></a></span>
<span id="cb51-239"><a href="#cb51-239"></a>The average person is 49 years old.</span>
<span id="cb51-240"><a href="#cb51-240"></a></span>
<span id="cb51-243"><a href="#cb51-243"></a><span class="in">```{r}</span></span>
<span id="cb51-244"><a href="#cb51-244"></a><span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-245"><a href="#cb51-245"></a><span class="in">```</span></span>
<span id="cb51-246"><a href="#cb51-246"></a></span>
<span id="cb51-247"><a href="#cb51-247"></a>The average person is expected to have an income of \$58,427.</span>
<span id="cb51-248"><a href="#cb51-248"></a></span>
<span id="cb51-251"><a href="#cb51-251"></a><span class="in">```{r}</span></span>
<span id="cb51-252"><a href="#cb51-252"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age_centered =</span> <span class="dv">18</span><span class="sc">:</span><span class="dv">80</span> <span class="sc">-</span> <span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb51-253"><a href="#cb51-253"></a></span>
<span id="cb51-254"><a href="#cb51-254"></a><span class="fu">augment</span>(m3, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb51-255"><a href="#cb51-255"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_centered, .fitted)) <span class="sc">+</span> </span>
<span id="cb51-256"><a href="#cb51-256"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb51-257"><a href="#cb51-257"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb51-258"><a href="#cb51-258"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span>
<span id="cb51-259"><a href="#cb51-259"></a><span class="in">```</span></span>
<span id="cb51-260"><a href="#cb51-260"></a></span>
<span id="cb51-261"><a href="#cb51-261"></a><span class="fu">## Exercise</span></span>
<span id="cb51-262"><a href="#cb51-262"></a></span>
<span id="cb51-263"><a href="#cb51-263"></a>**Transformations**</span>
<span id="cb51-264"><a href="#cb51-264"></a></span>
<span id="cb51-265"><a href="#cb51-265"></a>Transform the age variable so that it's in standard deviations away from the mean.</span>
<span id="cb51-266"><a href="#cb51-266"></a></span>
<span id="cb51-269"><a href="#cb51-269"></a><span class="in">```{r}</span></span>
<span id="cb51-270"><a href="#cb51-270"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb51-271"><a href="#cb51-271"></a>  <span class="fu">mutate</span>(<span class="at">age_std =</span> (age <span class="sc">-</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb51-272"><a href="#cb51-272"></a><span class="in">```</span></span>
<span id="cb51-273"><a href="#cb51-273"></a></span>
<span id="cb51-274"><a href="#cb51-274"></a>::: callout-note</span>
<span id="cb51-275"><a href="#cb51-275"></a>Fit the same model you fitted earlier:</span>
<span id="cb51-276"><a href="#cb51-276"></a></span>
<span id="cb51-277"><a href="#cb51-277"></a>$$</span>
<span id="cb51-278"><a href="#cb51-278"></a>\text{coninc}_i = \beta_0 + \beta_1 \text{age}_i + \beta_2 \text{age}^2_i</span>
<span id="cb51-279"><a href="#cb51-279"></a>$$</span>
<span id="cb51-280"><a href="#cb51-280"></a></span>
<span id="cb51-281"><a href="#cb51-281"></a>What changed and what remained the same?</span>
<span id="cb51-282"><a href="#cb51-282"></a></span>
<span id="cb51-283"><a href="#cb51-283"></a>What does the $\beta_0$ coefficient mean here?</span>
<span id="cb51-284"><a href="#cb51-284"></a></span>
<span id="cb51-285"><a href="#cb51-285"></a>How would you interpret the $\beta_1$ and $\beta_2$ coefficients?</span>
<span id="cb51-286"><a href="#cb51-286"></a>:::</span>
<span id="cb51-287"><a href="#cb51-287"></a></span>
<span id="cb51-290"><a href="#cb51-290"></a><span class="in">```{r}</span></span>
<span id="cb51-291"><a href="#cb51-291"></a>m4 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> age_std <span class="sc">+</span> <span class="fu">I</span>(age_std<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> d, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb51-292"><a href="#cb51-292"></a><span class="fu">modelsummary</span>(m4, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-293"><a href="#cb51-293"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-294"><a href="#cb51-294"></a><span class="in">```</span></span>
<span id="cb51-295"><a href="#cb51-295"></a></span>
<span id="cb51-296"><a href="#cb51-296"></a>The $\beta_0$ coefficient is the same as before because <span class="in">`age_std`</span> is also centered around zero.</span>
<span id="cb51-297"><a href="#cb51-297"></a></span>
<span id="cb51-298"><a href="#cb51-298"></a>The standard deviation of <span class="in">`age`</span> is 18.</span>
<span id="cb51-299"><a href="#cb51-299"></a></span>
<span id="cb51-302"><a href="#cb51-302"></a><span class="in">```{r}</span></span>
<span id="cb51-303"><a href="#cb51-303"></a><span class="fu">sd</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-304"><a href="#cb51-304"></a><span class="in">```</span></span>
<span id="cb51-305"><a href="#cb51-305"></a></span>
<span id="cb51-306"><a href="#cb51-306"></a>The other coefficients are a little bit harder to interpret because they work in tandem. The following graph shows the change in expected income that comes from a 1 unit increase in <span class="in">`age_std`</span>:</span>
<span id="cb51-307"><a href="#cb51-307"></a></span>
<span id="cb51-310"><a href="#cb51-310"></a><span class="in">```{r}</span></span>
<span id="cb51-311"><a href="#cb51-311"></a>grid <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">age_std =</span> (<span class="dv">18</span><span class="sc">:</span><span class="dv">80</span> <span class="sc">-</span> <span class="fu">mean</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(d<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb51-312"><a href="#cb51-312"></a></span>
<span id="cb51-313"><a href="#cb51-313"></a><span class="fu">augment</span>(m4, <span class="at">newdata =</span> grid) <span class="sc">|&gt;</span> </span>
<span id="cb51-314"><a href="#cb51-314"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_std, .fitted)) <span class="sc">+</span> </span>
<span id="cb51-315"><a href="#cb51-315"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb51-316"><a href="#cb51-316"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb51-317"><a href="#cb51-317"></a>  <span class="fu">geom_segment</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">58428</span>, <span class="at">yend =</span> <span class="dv">58428</span> <span class="sc">+</span> <span class="dv">3691</span> <span class="sc">-</span> <span class="dv">8711</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb51-318"><a href="#cb51-318"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span>
<span id="cb51-319"><a href="#cb51-319"></a><span class="in">```</span></span>
<span id="cb51-320"><a href="#cb51-320"></a></span>
<span id="cb51-321"><a href="#cb51-321"></a>Perhaps some simple high school math can help</span>
<span id="cb51-322"><a href="#cb51-322"></a></span>
<span id="cb51-323"><a href="#cb51-323"></a>$$</span>
<span id="cb51-324"><a href="#cb51-324"></a>\Delta y = \Delta x (3691.355 − 8711.331 \cdot  x)</span>
<span id="cb51-325"><a href="#cb51-325"></a>$$</span>
<span id="cb51-326"><a href="#cb51-326"></a></span>
<span id="cb51-327"><a href="#cb51-327"></a>When age changes by 1 unit ( $\Delta x = 1$ ), starting at 0 ( $x = 0$ ) the corresponding effect is $-5019.976$, which is the slope of the red line in the previous graph.</span>
<span id="cb51-328"><a href="#cb51-328"></a></span>
<span id="cb51-329"><a href="#cb51-329"></a><span class="fu">## Exercise</span></span>
<span id="cb51-330"><a href="#cb51-330"></a></span>
<span id="cb51-331"><a href="#cb51-331"></a>**Comparisons and Regression**</span>
<span id="cb51-332"><a href="#cb51-332"></a></span>
<span id="cb51-333"><a href="#cb51-333"></a>Simple averages and comparisons can be be interpreted as special cases of linear regression.</span>
<span id="cb51-334"><a href="#cb51-334"></a></span>
<span id="cb51-335"><a href="#cb51-335"></a>Take the comparison of <span class="in">`coninc`</span> among married and unmarried individuals.</span>
<span id="cb51-336"><a href="#cb51-336"></a></span>
<span id="cb51-337"><a href="#cb51-337"></a>I've included some code to make your life easier.</span>
<span id="cb51-338"><a href="#cb51-338"></a></span>
<span id="cb51-341"><a href="#cb51-341"></a><span class="in">```{r}</span></span>
<span id="cb51-342"><a href="#cb51-342"></a><span class="co">#| message: false</span></span>
<span id="cb51-343"><a href="#cb51-343"></a></span>
<span id="cb51-344"><a href="#cb51-344"></a>d2 <span class="ot">&lt;-</span> gss18 <span class="sc">|&gt;</span> </span>
<span id="cb51-345"><a href="#cb51-345"></a>  <span class="fu">select</span>(marital, coninc, sex) <span class="sc">|&gt;</span> </span>
<span id="cb51-346"><a href="#cb51-346"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-347"><a href="#cb51-347"></a>    <span class="at">coninc =</span> haven<span class="sc">::</span><span class="fu">zap_label</span>(coninc),</span>
<span id="cb51-348"><a href="#cb51-348"></a>    <span class="at">sex =</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(sex),</span>
<span id="cb51-349"><a href="#cb51-349"></a>    <span class="at">marital =</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(marital)</span>
<span id="cb51-350"><a href="#cb51-350"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb51-351"><a href="#cb51-351"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-352"><a href="#cb51-352"></a>  <span class="fu">mutate</span>(<span class="at">married =</span> <span class="fu">if_else</span>(marital <span class="sc">==</span> <span class="st">"married"</span>, 1L, 0L)) <span class="sc">|&gt;</span> </span>
<span id="cb51-353"><a href="#cb51-353"></a>  <span class="fu">mutate</span>(<span class="at">male =</span> <span class="fu">if_else</span>(sex <span class="sc">==</span> <span class="st">"male"</span>, 1L, 0L))</span>
<span id="cb51-354"><a href="#cb51-354"></a></span>
<span id="cb51-355"><a href="#cb51-355"></a>d2 <span class="sc">|&gt;</span> </span>
<span id="cb51-356"><a href="#cb51-356"></a>  <span class="fu">group_by</span>(married) <span class="sc">|&gt;</span> </span>
<span id="cb51-357"><a href="#cb51-357"></a>  <span class="fu">summarize</span>(</span>
<span id="cb51-358"><a href="#cb51-358"></a>    <span class="at">avg_coninc =</span> <span class="fu">mean</span>(coninc), </span>
<span id="cb51-359"><a href="#cb51-359"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(coninc),</span>
<span id="cb51-360"><a href="#cb51-360"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb51-361"><a href="#cb51-361"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb51-362"><a href="#cb51-362"></a>  <span class="fu">mutate</span>(<span class="at">std_error =</span> sd <span class="sc">/</span> <span class="fu">sqrt</span>(<span class="fu">n</span>()))</span>
<span id="cb51-363"><a href="#cb51-363"></a><span class="in">```</span></span>
<span id="cb51-364"><a href="#cb51-364"></a></span>
<span id="cb51-365"><a href="#cb51-365"></a>::: callout-note</span>
<span id="cb51-366"><a href="#cb51-366"></a>Fit a regression model that predicts <span class="in">`coninc`</span> from <span class="in">`married`</span>.</span>
<span id="cb51-367"><a href="#cb51-367"></a></span>
<span id="cb51-368"><a href="#cb51-368"></a>$$</span>
<span id="cb51-369"><a href="#cb51-369"></a>\begin{align}</span>
<span id="cb51-370"><a href="#cb51-370"></a>\text{coninc}_i &amp;\sim \text{Normal}(\mu_i, \sigma_i) <span class="sc">\\</span></span>
<span id="cb51-371"><a href="#cb51-371"></a>\mu_i &amp;= \beta_0 + \beta_1 \text{married}_i</span>
<span id="cb51-372"><a href="#cb51-372"></a>\end{align}</span>
<span id="cb51-373"><a href="#cb51-373"></a>$$</span>
<span id="cb51-374"><a href="#cb51-374"></a></span>
<span id="cb51-375"><a href="#cb51-375"></a>Compare the results to the previous <span class="in">`dplyr`</span> table. What do you notice?</span>
<span id="cb51-376"><a href="#cb51-376"></a>:::</span>
<span id="cb51-377"><a href="#cb51-377"></a></span>
<span id="cb51-380"><a href="#cb51-380"></a><span class="in">```{r}</span></span>
<span id="cb51-381"><a href="#cb51-381"></a>m5 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> married, <span class="at">data =</span> d2)</span>
<span id="cb51-382"><a href="#cb51-382"></a><span class="fu">modelsummary</span>(m5, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-383"><a href="#cb51-383"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-384"><a href="#cb51-384"></a><span class="in">```</span></span>
<span id="cb51-385"><a href="#cb51-385"></a></span>
<span id="cb51-386"><a href="#cb51-386"></a>The $\beta_0$ coefficient is the value of <span class="in">`avg_inc`</span> in the first row.</span>
<span id="cb51-387"><a href="#cb51-387"></a></span>
<span id="cb51-388"><a href="#cb51-388"></a>The $\beta_1$ coefficient is the the difference between both values of <span class="in">`avg_inc`</span> in the table---i.e., it is the difference in average *family income* between married and unmarried people.</span>
<span id="cb51-389"><a href="#cb51-389"></a></span>
<span id="cb51-390"><a href="#cb51-390"></a>**Standard Errors**</span>
<span id="cb51-391"><a href="#cb51-391"></a></span>
<span id="cb51-392"><a href="#cb51-392"></a>The formula for the standard error for a comparison of means is given by:</span>
<span id="cb51-393"><a href="#cb51-393"></a></span>
<span id="cb51-394"><a href="#cb51-394"></a>$$</span>
<span id="cb51-395"><a href="#cb51-395"></a>\text{se}(\overline x_1 - \overline x_2) = \sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}} </span>
<span id="cb51-396"><a href="#cb51-396"></a>$$</span>
<span id="cb51-397"><a href="#cb51-397"></a></span>
<span id="cb51-398"><a href="#cb51-398"></a>::: callout-note</span>
<span id="cb51-399"><a href="#cb51-399"></a>Calculate the standard error by plugging in the corresponding values in the <span class="in">`dplyr`</span> table. Compare this value to the standard error corresponding to the <span class="in">`married`</span> coefficient. Do they look similar?</span>
<span id="cb51-400"><a href="#cb51-400"></a>:::</span>
<span id="cb51-401"><a href="#cb51-401"></a></span>
<span id="cb51-404"><a href="#cb51-404"></a><span class="in">```{r}</span></span>
<span id="cb51-405"><a href="#cb51-405"></a><span class="fu">sqrt</span>((<span class="fl">34642.61</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">1229</span>) <span class="sc">+</span> (<span class="fl">45378.47</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">923</span>))</span>
<span id="cb51-406"><a href="#cb51-406"></a><span class="in">```</span></span>
<span id="cb51-407"><a href="#cb51-407"></a></span>
<span id="cb51-408"><a href="#cb51-408"></a>Yes, they look similar. I am actually a little annoyed because I was expecting them to be the same... I guess there's still some gaps in my knowledge 😳</span>
<span id="cb51-409"><a href="#cb51-409"></a></span>
<span id="cb51-410"><a href="#cb51-410"></a><span class="fu">## Exercise</span></span>
<span id="cb51-411"><a href="#cb51-411"></a></span>
<span id="cb51-412"><a href="#cb51-412"></a>**Binary Interactions**</span>
<span id="cb51-413"><a href="#cb51-413"></a></span>
<span id="cb51-414"><a href="#cb51-414"></a>Just as we did with logistic regression, we can use interactions to reconstruct a $2\times 2$ table. The difference is that the cells contain averages instead of counts.</span>
<span id="cb51-415"><a href="#cb51-415"></a></span>
<span id="cb51-416"><a href="#cb51-416"></a>For example:</span>
<span id="cb51-417"><a href="#cb51-417"></a></span>
<span id="cb51-420"><a href="#cb51-420"></a><span class="in">```{r}</span></span>
<span id="cb51-421"><a href="#cb51-421"></a>d2 <span class="sc">|&gt;</span> </span>
<span id="cb51-422"><a href="#cb51-422"></a>  <span class="fu">group_by</span>(male, married) <span class="sc">|&gt;</span> </span>
<span id="cb51-423"><a href="#cb51-423"></a>  <span class="fu">summarize</span>(<span class="at">coninc =</span> <span class="fu">mean</span>(coninc, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb51-424"><a href="#cb51-424"></a><span class="in">```</span></span>
<span id="cb51-425"><a href="#cb51-425"></a></span>
<span id="cb51-426"><a href="#cb51-426"></a>Fit a normal linear regression that predicts <span class="in">`coninc`</span> from <span class="in">`sex`</span> and <span class="in">`married`</span>.</span>
<span id="cb51-427"><a href="#cb51-427"></a></span>
<span id="cb51-428"><a href="#cb51-428"></a>$$</span>
<span id="cb51-429"><a href="#cb51-429"></a>\begin{align}</span>
<span id="cb51-430"><a href="#cb51-430"></a>\text{coninc}_i &amp;\sim \text{Normal}(\mu_i, \sigma_i) <span class="sc">\\</span></span>
<span id="cb51-431"><a href="#cb51-431"></a>\mu_i &amp;= \beta_0 + \beta_1 \text{male}_i + \beta_2 \text{married}_i + \beta_3 \text{male}_i \times \text{married}_i</span>
<span id="cb51-432"><a href="#cb51-432"></a>\end{align}</span>
<span id="cb51-433"><a href="#cb51-433"></a>$$</span>
<span id="cb51-434"><a href="#cb51-434"></a></span>
<span id="cb51-437"><a href="#cb51-437"></a><span class="in">```{r}</span></span>
<span id="cb51-438"><a href="#cb51-438"></a>m6 <span class="ot">&lt;-</span> <span class="fu">glm</span>(coninc <span class="sc">~</span> male<span class="sc">*</span>married, <span class="at">data =</span> d2) </span>
<span id="cb51-439"><a href="#cb51-439"></a><span class="fu">modelsummary</span>(m6, <span class="at">gof_map =</span> <span class="st">"none"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-440"><a href="#cb51-440"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-441"><a href="#cb51-441"></a><span class="in">```</span></span>
<span id="cb51-442"><a href="#cb51-442"></a></span>
<span id="cb51-443"><a href="#cb51-443"></a>Fill in the following empty spaces with corresponding coefficient values:</span>
<span id="cb51-444"><a href="#cb51-444"></a></span>
<span id="cb51-445"><a href="#cb51-445"></a>| male | married | coninc   | regression output                       |</span>
<span id="cb51-446"><a href="#cb51-446"></a>|------|---------|----------|-----------------------------------------|</span>
<span id="cb51-447"><a href="#cb51-447"></a>| 0    | 0       | 33560.78 | $\beta_0$                               |</span>
<span id="cb51-448"><a href="#cb51-448"></a>| 0    | 1       | 66759.76 | $\beta_0 + \beta_2$                     |</span>
<span id="cb51-449"><a href="#cb51-449"></a>| 1    | 0       | 41014.66 | $\beta_0 + \beta_1$                     |</span>
<span id="cb51-450"><a href="#cb51-450"></a>| 1    | 1       | 68292.14 | $\beta_0 + \beta_1 + \beta_2 + \beta_3$ |</span>
<span id="cb51-451"><a href="#cb51-451"></a></span>
<span id="cb51-452"><a href="#cb51-452"></a><span class="fu">## Exercise</span></span>
<span id="cb51-453"><a href="#cb51-453"></a></span>
<span id="cb51-454"><a href="#cb51-454"></a>For this exercise I am going to ask you to import the <span class="in">`bikes`</span> dataset from the <span class="in">`bayesrules`</span> package. You will probably need to install this package first.</span>
<span id="cb51-455"><a href="#cb51-455"></a></span>
<span id="cb51-458"><a href="#cb51-458"></a><span class="in">```{r}</span></span>
<span id="cb51-459"><a href="#cb51-459"></a><span class="fu">data</span>(bikes, <span class="at">package =</span> <span class="st">"bayesrules"</span>)</span>
<span id="cb51-460"><a href="#cb51-460"></a><span class="in">```</span></span>
<span id="cb51-461"><a href="#cb51-461"></a></span>
<span id="cb51-462"><a href="#cb51-462"></a>::: callout-note</span>
<span id="cb51-463"><a href="#cb51-463"></a>You will have to fit a normal linear regression that predicts the number of bikeshare rides using <span class="in">`windspeed`</span>, <span class="in">`weekend`</span>, and <span class="in">`temp_feel`</span> as predictors.</span>
<span id="cb51-464"><a href="#cb51-464"></a></span>
<span id="cb51-465"><a href="#cb51-465"></a>Before doing that, make sure you center <span class="in">`windspeed`</span> and <span class="in">`temp_feel`</span> around their mean values.</span>
<span id="cb51-466"><a href="#cb51-466"></a></span>
<span id="cb51-467"><a href="#cb51-467"></a>If the temperature and the wind speed are average, what is the expected ridership for a weekend day? What is the expected ridership for a weekday? Show the code that gets you your answers.</span>
<span id="cb51-468"><a href="#cb51-468"></a>:::</span>
<span id="cb51-469"><a href="#cb51-469"></a></span>
<span id="cb51-472"><a href="#cb51-472"></a><span class="in">```{r}</span></span>
<span id="cb51-473"><a href="#cb51-473"></a>bikes <span class="ot">&lt;-</span> bikes <span class="sc">|&gt;</span> </span>
<span id="cb51-474"><a href="#cb51-474"></a>  <span class="fu">mutate</span>(<span class="at">windspeed =</span> windspeed <span class="sc">-</span> <span class="fu">mean</span>(windspeed)) <span class="sc">|&gt;</span> </span>
<span id="cb51-475"><a href="#cb51-475"></a>  <span class="fu">mutate</span>(<span class="at">temp_feel =</span> temp_feel <span class="sc">-</span> <span class="fu">mean</span>(temp_feel))</span>
<span id="cb51-476"><a href="#cb51-476"></a></span>
<span id="cb51-477"><a href="#cb51-477"></a>m7 <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes)</span>
<span id="cb51-478"><a href="#cb51-478"></a><span class="fu">modelsummary</span>(m7, <span class="at">gof_map =</span> <span class="st">"nobs"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-479"><a href="#cb51-479"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-480"><a href="#cb51-480"></a><span class="in">```</span></span>
<span id="cb51-481"><a href="#cb51-481"></a></span>
<span id="cb51-482"><a href="#cb51-482"></a><span class="ss">-   </span>If the temperature and the wind speed are average, the expected ridership for a weekend day is:</span>
<span id="cb51-483"><a href="#cb51-483"></a></span>
<span id="cb51-486"><a href="#cb51-486"></a><span class="in">```{r}</span></span>
<span id="cb51-487"><a href="#cb51-487"></a><span class="fu">coefficients</span>(m7)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span>
<span id="cb51-488"><a href="#cb51-488"></a><span class="fu">sum</span>(<span class="fu">coefficients</span>(m7)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]) </span>
<span id="cb51-489"><a href="#cb51-489"></a><span class="in">```</span></span>
<span id="cb51-490"><a href="#cb51-490"></a></span>
<span id="cb51-491"><a href="#cb51-491"></a>*Note. I can get away with this because the other variables are centered.*</span>
<span id="cb51-492"><a href="#cb51-492"></a></span>
<span id="cb51-493"><a href="#cb51-493"></a><span class="ss">-   </span>What is the expected ridership for a weekday?</span>
<span id="cb51-494"><a href="#cb51-494"></a></span>
<span id="cb51-495"><a href="#cb51-495"></a>That's just given by the intercept. It's 3683.442 rides (in average).</span>
<span id="cb51-496"><a href="#cb51-496"></a></span>
<span id="cb51-497"><a href="#cb51-497"></a><span class="fu">## Exercise</span></span>
<span id="cb51-498"><a href="#cb51-498"></a></span>
<span id="cb51-499"><a href="#cb51-499"></a>::: callout-note</span>
<span id="cb51-500"><a href="#cb51-500"></a>Repeat the exercise above, but fit a Poisson model instead.</span>
<span id="cb51-501"><a href="#cb51-501"></a></span>
<span id="cb51-502"><a href="#cb51-502"></a>If the temperature and the wind speed are average, what is the expected ridership for a weekend day? What is the expected ridership for a weekday? Show the code that gets you your answers.</span>
<span id="cb51-503"><a href="#cb51-503"></a>:::</span>
<span id="cb51-504"><a href="#cb51-504"></a></span>
<span id="cb51-507"><a href="#cb51-507"></a><span class="in">```{r}</span></span>
<span id="cb51-508"><a href="#cb51-508"></a>m8 <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes, <span class="at">family =</span> <span class="st">"poisson"</span>)</span>
<span id="cb51-509"><a href="#cb51-509"></a><span class="fu">modelsummary</span>(m8, <span class="at">gof_map =</span> <span class="st">"nobs"</span>, <span class="at">output =</span> <span class="st">"gt"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-510"><a href="#cb51-510"></a>  <span class="fu">opt_table_font</span>(<span class="at">font =</span> <span class="st">"Optima"</span>)</span>
<span id="cb51-511"><a href="#cb51-511"></a><span class="in">```</span></span>
<span id="cb51-512"><a href="#cb51-512"></a></span>
<span id="cb51-513"><a href="#cb51-513"></a><span class="ss">-   </span>If the temperature and the wind speed are average, the expected ridership for a weekend day is:</span>
<span id="cb51-514"><a href="#cb51-514"></a></span>
<span id="cb51-517"><a href="#cb51-517"></a><span class="in">```{r}</span></span>
<span id="cb51-518"><a href="#cb51-518"></a><span class="fu">coefficients</span>(m8)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span>
<span id="cb51-519"><a href="#cb51-519"></a><span class="fu">exp</span>(<span class="fu">sum</span>(<span class="fu">coefficients</span>(m8)[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]))</span>
<span id="cb51-520"><a href="#cb51-520"></a><span class="in">```</span></span>
<span id="cb51-521"><a href="#cb51-521"></a></span>
<span id="cb51-522"><a href="#cb51-522"></a><span class="ss">-   </span>That's just given by the intercept.</span>
<span id="cb51-523"><a href="#cb51-523"></a></span>
<span id="cb51-526"><a href="#cb51-526"></a><span class="in">```{r}</span></span>
<span id="cb51-527"><a href="#cb51-527"></a><span class="fu">exp</span>(<span class="fu">coefficients</span>(m8)[[<span class="dv">1</span>]])</span>
<span id="cb51-528"><a href="#cb51-528"></a><span class="in">```</span></span>
<span id="cb51-529"><a href="#cb51-529"></a></span>
<span id="cb51-530"><a href="#cb51-530"></a><span class="fu">## Exercise</span></span>
<span id="cb51-531"><a href="#cb51-531"></a></span>
<span id="cb51-532"><a href="#cb51-532"></a>In order to assess goodness of fit, it is sometimes useful to plot the residuals against some predictor.</span>
<span id="cb51-533"><a href="#cb51-533"></a></span>
<span id="cb51-534"><a href="#cb51-534"></a>$$</span>
<span id="cb51-535"><a href="#cb51-535"></a>\varepsilon_i = y_i - \hat y_i</span>
<span id="cb51-536"><a href="#cb51-536"></a>$$</span>
<span id="cb51-537"><a href="#cb51-537"></a></span>
<span id="cb51-538"><a href="#cb51-538"></a>If the model fits well, we should expect to see the residuals to be normally distributed around zero.</span>
<span id="cb51-539"><a href="#cb51-539"></a></span>
<span id="cb51-540"><a href="#cb51-540"></a>For example:</span>
<span id="cb51-541"><a href="#cb51-541"></a></span>
<span id="cb51-544"><a href="#cb51-544"></a><span class="in">```{r}</span></span>
<span id="cb51-545"><a href="#cb51-545"></a><span class="co">#| code-fold: true</span></span>
<span id="cb51-546"><a href="#cb51-546"></a>mod_normal <span class="ot">&lt;-</span> <span class="fu">glm</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp_feel <span class="sc">+</span> weekend, <span class="at">data =</span> bikes, <span class="at">family =</span> <span class="st">"gaussian"</span>)</span>
<span id="cb51-547"><a href="#cb51-547"></a>bikes<span class="sc">$</span>resid <span class="ot">&lt;-</span> <span class="fu">residuals</span>(mod_normal)</span>
<span id="cb51-548"><a href="#cb51-548"></a></span>
<span id="cb51-549"><a href="#cb51-549"></a>bikes <span class="sc">|&gt;</span> </span>
<span id="cb51-550"><a href="#cb51-550"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, resid)) <span class="sc">+</span> </span>
<span id="cb51-551"><a href="#cb51-551"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-552"><a href="#cb51-552"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span> </span>
<span id="cb51-553"><a href="#cb51-553"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb51-554"><a href="#cb51-554"></a>    <span class="at">data =</span> <span class="fu">filter</span>(bikes, <span class="fu">abs</span>(resid) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">abs</span>(resid))),</span>
<span id="cb51-555"><a href="#cb51-555"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb51-556"><a href="#cb51-556"></a>  )</span>
<span id="cb51-557"><a href="#cb51-557"></a><span class="in">```</span></span>
<span id="cb51-558"><a href="#cb51-558"></a></span>
<span id="cb51-559"><a href="#cb51-559"></a>::: callout-note</span>
<span id="cb51-560"><a href="#cb51-560"></a>What can you tell me about the model fit? Why do you think the model fits poorly?</span>
<span id="cb51-561"><a href="#cb51-561"></a></span>
<span id="cb51-562"><a href="#cb51-562"></a>Use <span class="in">`dplyr`</span> to figure out the date of the observation with the largest residual (shown circled in red). Why is the model so poor at predicting the number of bikeshare rides this day?</span>
<span id="cb51-563"><a href="#cb51-563"></a>:::</span>
<span id="cb51-564"><a href="#cb51-564"></a></span>
<span id="cb51-565"><a href="#cb51-565"></a>The model fits poorly because the number of rides seems to have been increasing steadily over the course of three years. There's probably also some seasonality in the data (although it is not easy to spot in the graph).</span>
<span id="cb51-566"><a href="#cb51-566"></a></span>
<span id="cb51-569"><a href="#cb51-569"></a><span class="in">```{r}</span></span>
<span id="cb51-570"><a href="#cb51-570"></a><span class="fu">filter</span>(bikes, <span class="fu">abs</span>(resid) <span class="sc">==</span> <span class="fu">max</span>(<span class="fu">abs</span>(resid))) <span class="sc">|&gt;</span> </span>
<span id="cb51-571"><a href="#cb51-571"></a>  <span class="fu">pull</span>(date)</span>
<span id="cb51-572"><a href="#cb51-572"></a><span class="in">```</span></span>
<span id="cb51-573"><a href="#cb51-573"></a></span>
<span id="cb51-574"><a href="#cb51-574"></a><span class="al">![The answer](images/hurricane.png)</span>{fig-align="center" width="80%"}</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>